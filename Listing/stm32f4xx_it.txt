; generated by Component: ARM Compiler 5.06 update 6 (build 750) Tool: ArmCC [4d3637]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o..\output\stm32f4xx_it.o --asm_dir=..\Listing\ --list_dir=..\Listing\ --depend=..\output\stm32f4xx_it.d --cpu=Cortex-M4.fp --apcs=interwork -O1 --diag_suppress=9931,870 -I..\APP -I..\drive -I..\Include -I..\Libraries\CMSIS\inc -I..\Libraries\CMSIS\src -I..\Libraries\FWlib\inc -I..\Libraries\FWlib\src -I..\Listing -I..\Output -I..\Project -I..\STemWinLibrary522\Config -I..\STemWinLibrary522\emWinTask -I..\STemWinLibrary522\GUILib -I..\STemWinLibrary522\inc -I..\User -I..\USB\STM32_USB_HOST_Library\Class\HID\inc -I..\USB\STM32_USB_HOST_Library\Class\MSC\src -I..\USB\STM32_USB_HOST_Library\Core\src -I..\USB\USB_APP -I..\USB\STM32_USB_HOST_Library\Class\HID\src -I..\USB\STM32_USB_HOST_Library\Class\MSC\inc -I..\USB\STM32_USB_HOST_Library\Core\inc -I..\USB\STM32_USB_OTG_Driver\inc -I..\FATFS\exfuns -I..\FATFS\src\option -I..\FATFS\src -I..\MALLOC -I..\FATFS -I..\IAP -IE:\Keil_v5\ARM\RV31\INC -IE:\Keil_v5\ARM\CMSIS\Include -IE:\Keil_v5\ARM\INC\ST\STM32F4xx -D__UVISION_VERSION=525 -DUSE_STDPERIPH_DRIVER -DSTM32F40XX -DUSE_USB_OTG_FS -DUSE_EMBEDDED_PHY -DUSE_USB_OTG_HS -DSTM32F40XX --omf_browse=..\output\stm32f4xx_it.crf --no_multibyte_chars ..\User\stm32f4xx_it.c]
                          THUMB

                          AREA ||i.BEBufToUint16||, CODE, READONLY, ALIGN=1

                  BEBufToUint16 PROC
;;;272    */
;;;273    uint16_t BEBufToUint16(uint8_t *_pBuf)
000000  7841              LDRB     r1,[r0,#1]
;;;274    {
;;;275        return (((uint16_t)_pBuf[0] << 8) | _pBuf[1]);
000002  7800              LDRB     r0,[r0,#0]
000004  ea412000          ORR      r0,r1,r0,LSL #8
;;;276    }
000008  4770              BX       lr
;;;277    
                          ENDP


                          AREA ||i.BusFault_Handler||, CODE, READONLY, ALIGN=1

                  BusFault_Handler PROC
                  |L2.0|
;;;140      */
;;;141    void BusFault_Handler(void)
000000  e7fe              B        |L2.0|
;;;142    {
;;;143      /* Go to infinite loop when Bus Fault exception occurs */
;;;144      while (1)
;;;145      {
;;;146      }
;;;147    }
;;;148    
                          ENDP


                          AREA ||i.CRC16||, CODE, READONLY, ALIGN=2

                  CRC16 PROC
;;;1218   
;;;1219   uint16_t CRC16(uint8_t *_pBuf, uint16_t _usLen)
000000  b570              PUSH     {r4-r6,lr}
;;;1220   {    
;;;1221       uint8_t ucCRCHi = 0xFF; /* ¸ßCRC×Ö½Ú³õÊ¼»¯ */
000002  22ff              MOVS     r2,#0xff
;;;1222   	uint8_t ucCRCLo = 0xFF; /* µÍCRC ×Ö½Ú³õÊ¼»¯ */
000004  23ff              MOVS     r3,#0xff
;;;1223   	uint16_t usIndex;  /* CRCÑ­»·ÖÐµÄË÷Òý */
;;;1224   
;;;1225       while (_usLen--)
;;;1226       {
;;;1227   		usIndex = ucCRCHi ^ *_pBuf++; /* ¼ÆËãCRC */
;;;1228   		ucCRCHi = ucCRCLo ^ s_CRCHi[usIndex];
000006  4d08              LDR      r5,|L3.40|
;;;1229   		ucCRCLo = s_CRCLo[usIndex];
000008  f5057680          ADD      r6,r5,#0x100
00000c  e005              B        |L3.26|
                  |L3.14|
00000e  f8104b01          LDRB     r4,[r0],#1            ;1227
000012  4054              EORS     r4,r4,r2              ;1227
000014  5d2a              LDRB     r2,[r5,r4]            ;1228
000016  405a              EORS     r2,r2,r3              ;1228
000018  5d33              LDRB     r3,[r6,r4]
                  |L3.26|
00001a  1e49              SUBS     r1,r1,#1              ;1225
00001c  b289              UXTH     r1,r1                 ;1225
00001e  d2f6              BCS      |L3.14|
;;;1230       }
;;;1231       return ((uint16_t)ucCRCHi << 8 | ucCRCLo);
000020  ea432002          ORR      r0,r3,r2,LSL #8
;;;1232   }
000024  bd70              POP      {r4-r6,pc}
;;;1233   
                          ENDP

000026  0000              DCW      0x0000
                  |L3.40|
                          DCD      ||.constdata||

                          AREA ||i.DMA2_Stream0_IRQHandler||, CODE, READONLY, ALIGN=2

                  DMA2_Stream0_IRQHandler PROC
;;;360    
;;;361    void  DMA2_Stream0_IRQHandler(void)
000000  b510              PUSH     {r4,lr}
;;;362    {
;;;363    	DMA_ClearITPendingBit(DMA2_Stream0,DMA_IT_TCIF0);
000002  4905              LDR      r1,|L4.24|
000004  4805              LDR      r0,|L4.28|
000006  f7fffffe          BL       DMA_ClearITPendingBit
;;;364    	Flag_ADC_Full=1;
00000a  4805              LDR      r0,|L4.32|
00000c  6801              LDR      r1,[r0,#0]  ; flagA
00000e  f0410102          ORR      r1,r1,#2
000012  6001              STR      r1,[r0,#0]  ; flagA
;;;365    }
000014  bd10              POP      {r4,pc}
;;;366    
                          ENDP

000016  0000              DCW      0x0000
                  |L4.24|
                          DCD      0x10008020
                  |L4.28|
                          DCD      0x40026410
                  |L4.32|
                          DCD      flagA

                          AREA ||i.DebugMon_Handler||, CODE, READONLY, ALIGN=1

                  DebugMon_Handler PROC
;;;175      */
;;;176    void DebugMon_Handler(void)
000000  4770              BX       lr
;;;177    {
;;;178    }
;;;179    
                          ENDP


                          AREA ||i.HardFault_Handler||, CODE, READONLY, ALIGN=1

                  HardFault_Handler PROC
                  |L6.0|
;;;114      */
;;;115    void HardFault_Handler(void)
000000  e7fe              B        |L6.0|
;;;116    {
;;;117      /* Go to infinite loop when Hard Fault exception occurs */
;;;118      while (1)
;;;119      {
;;;120      }
;;;121    }
;;;122    
                          ENDP


                          AREA ||i.MODS_03H||, CODE, READONLY, ALIGN=2

                  MODS_03H PROC
;;;977    
;;;978    static void MODS_03H(void)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;979    {
000004  b090              SUB      sp,sp,#0x40
;;;980        uint16_t reg;
;;;981    	uint16_t num;
;;;982    	uint16_t i;
;;;983    	uint8_t reg_value[64];
;;;984    
;;;985        
;;;986        g_tModS.RspCode = RSP_OK;
000006  4d2c              LDR      r5,|L7.184|
000008  2000              MOVS     r0,#0
00000a  f88500a1          STRB     r0,[r5,#0xa1]
;;;987    
;;;988    	if (g_tModS.RxCount != 8)								/* 03HÃüÁî±ØÐëÊÇ8¸ö×Ö½Ú */
00000e  f895009e          LDRB     r0,[r5,#0x9e]  ; g_tModS
;;;989    	{
;;;990    		g_tModS.RspCode = RSP_ERR_VALUE;					/* Êý¾ÝÖµÓò´íÎó */
000012  f04f0903          MOV      r9,#3
;;;991    		goto err_ret;
;;;992    	}
;;;993    
;;;994    	reg = BEBufToUint16(&g_tModS.RxBuf[2]); 				/* ¼Ä´æÆ÷ºÅ */
;;;995    	num = BEBufToUint16(&g_tModS.RxBuf[4]);					/* ¼Ä´æÆ÷¸öÊý */
;;;996    	if (num > sizeof(reg_value) / 2)
;;;997    	{
;;;998    		g_tModS.RspCode = RSP_ERR_VALUE;					/* Êý¾ÝÖµÓò´íÎó */
;;;999    		goto err_ret;
;;;1000   	}
;;;1001   
;;;1002   	for (i = 0; i < num; i++)
;;;1003   	{
;;;1004   		if (MODS_ReadRegValue(reg, &reg_value[2 * i]) == 0)	/* ¶Á³ö¼Ä´æÆ÷Öµ·ÅÈëreg_value */
;;;1005   		{
;;;1006   			g_tModS.RspCode = RSP_ERR_REG_ADDR;				/* ¼Ä´æÆ÷µØÖ·´íÎó */
000016  f04f0a02          MOV      r10,#2
00001a  46e8              MOV      r8,sp                 ;983
00001c  2808              CMP      r0,#8                 ;988
00001e  d002              BEQ      |L7.38|
000020  f88590a1          STRB     r9,[r5,#0xa1]         ;990
000024  e01a              B        |L7.92|
                  |L7.38|
000026  1ca8              ADDS     r0,r5,#2              ;994
000028  f7fffffe          BL       BEBufToUint16
00002c  4607              MOV      r7,r0                 ;994
00002e  1d28              ADDS     r0,r5,#4              ;995
000030  f7fffffe          BL       BEBufToUint16
000034  4606              MOV      r6,r0                 ;995
000036  2e20              CMP      r6,#0x20              ;996
000038  d902              BLS      |L7.64|
00003a  f88590a1          STRB     r9,[r5,#0xa1]         ;998
00003e  e00d              B        |L7.92|
                  |L7.64|
000040  2400              MOVS     r4,#0                 ;1002
000042  e009              B        |L7.88|
                  |L7.68|
000044  eb080144          ADD      r1,r8,r4,LSL #1       ;1004
000048  4638              MOV      r0,r7                 ;1004
00004a  f7fffffe          BL       MODS_ReadRegValue
00004e  b1a8              CBZ      r0,|L7.124|
;;;1007   			break;
;;;1008   		}
;;;1009   		reg++;
000050  1c7f              ADDS     r7,r7,#1
000052  b2bf              UXTH     r7,r7
000054  1c64              ADDS     r4,r4,#1              ;1002
000056  b2a4              UXTH     r4,r4                 ;1002
                  |L7.88|
000058  42b4              CMP      r4,r6                 ;1002
00005a  d3f3              BCC      |L7.68|
                  |L7.92|
;;;1010   	}
;;;1011   
;;;1012   err_ret:
;;;1013   	if (g_tModS.RspCode == RSP_OK)							/* ÕýÈ·Ó¦´ð */
00005c  f89500a1          LDRB     r0,[r5,#0xa1]  ; g_tModS
000060  2800              CMP      r0,#0
000062  d125              BNE      |L7.176|
;;;1014   	{
;;;1015   		g_tModS.TxCount = 0;
;;;1016   		g_tModS.TxBuf[g_tModS.TxCount++] = g_tModS.RxBuf[0];
000064  7828              LDRB     r0,[r5,#0]  ; g_tModS
000066  77a8              STRB     r0,[r5,#0x1e]
;;;1017   		g_tModS.TxBuf[g_tModS.TxCount++] = g_tModS.RxBuf[1];
000068  4913              LDR      r1,|L7.184|
00006a  7868              LDRB     r0,[r5,#1]  ; g_tModS
00006c  77c8              STRB     r0,[r1,#0x1f]
;;;1018   		g_tModS.TxBuf[g_tModS.TxCount++] = num * 2;			/* ·µ»Ø×Ö½ÚÊý */
00006e  0070              LSLS     r0,r6,#1
000070  f88590a2          STRB     r9,[r5,#0xa2]
000074  f8810020          STRB     r0,[r1,#0x20]
;;;1019   
;;;1020   		for (i = 0; i < num; i++)
000078  2100              MOVS     r1,#0
00007a  e017              B        |L7.172|
                  |L7.124|
00007c  f885a0a1          STRB     r10,[r5,#0xa1]        ;1006
000080  e7ec              B        |L7.92|
                  |L7.130|
;;;1021   		{
;;;1022   			g_tModS.TxBuf[g_tModS.TxCount++] = reg_value[2*i];
000082  f89500a2          LDRB     r0,[r5,#0xa2]  ; g_tModS
000086  f8183011          LDRB     r3,[r8,r1,LSL #1]
00008a  1c42              ADDS     r2,r0,#1
00008c  4428              ADD      r0,r0,r5
00008e  f88520a2          STRB     r2,[r5,#0xa2]
000092  7783              STRB     r3,[r0,#0x1e]
;;;1023   			g_tModS.TxBuf[g_tModS.TxCount++] = reg_value[2*i+1];
000094  eb080041          ADD      r0,r8,r1,LSL #1
000098  7843              LDRB     r3,[r0,#1]
00009a  f89500a2          LDRB     r0,[r5,#0xa2]  ; g_tModS
00009e  1c42              ADDS     r2,r0,#1
0000a0  4428              ADD      r0,r0,r5
0000a2  f88520a2          STRB     r2,[r5,#0xa2]
0000a6  7783              STRB     r3,[r0,#0x1e]
0000a8  1c49              ADDS     r1,r1,#1              ;1020
0000aa  b289              UXTH     r1,r1                 ;1020
                  |L7.172|
0000ac  42b1              CMP      r1,r6                 ;1020
0000ae  d3e8              BCC      |L7.130|
                  |L7.176|
;;;1024   		}
;;;1025   //         if(usartocflag == 0)
;;;1026   //         {
;;;1027   //             MODS_SendWithCRC(g_tModS.TxBuf, g_tModS.TxCount);	/* ·¢ËÍÕýÈ·Ó¦´ð */
;;;1028   //         }
;;;1029   	}
;;;1030   	else
;;;1031   	{
;;;1032   //		MODS_SendAckErr(g_tModS.RspCode);					/* ·¢ËÍ´íÎóÓ¦´ð */
;;;1033   	}
;;;1034       
;;;1035   }
0000b0  b010              ADD      sp,sp,#0x40
0000b2  e8bd87f0          POP      {r4-r10,pc}
;;;1036   
                          ENDP

0000b6  0000              DCW      0x0000
                  |L7.184|
                          DCD      ||.bss||

                          AREA ||i.MODS_06H||, CODE, READONLY, ALIGN=2

                  MODS_06H PROC
;;;1060   
;;;1061   static void MODS_06H(void)
000000  b510              PUSH     {r4,lr}
;;;1062   {
;;;1063       uint16_t reg;
;;;1064   	uint16_t value;
;;;1065   
;;;1066   	g_tModS.RspCode = RSP_OK;
000002  4c12              LDR      r4,|L8.76|
000004  2000              MOVS     r0,#0
000006  f88400a1          STRB     r0,[r4,#0xa1]
;;;1067   
;;;1068   	if (g_tModS.RxCount != 8)
00000a  f894009e          LDRB     r0,[r4,#0x9e]  ; g_tModS
00000e  2808              CMP      r0,#8
000010  d003              BEQ      |L8.26|
;;;1069   	{
;;;1070   		g_tModS.RspCode = RSP_ERR_VALUE;		/* Êý¾ÝÖµÓò´íÎó */
000012  2003              MOVS     r0,#3
000014  f88400a1          STRB     r0,[r4,#0xa1]
;;;1071   		goto err_ret;
000018  e00f              B        |L8.58|
                  |L8.26|
;;;1072   	}
;;;1073   
;;;1074   	reg = BEBufToUint16(&g_tModS.RxBuf[2]); 	/* ¼Ä´æÆ÷ºÅ */
00001a  1ca0              ADDS     r0,r4,#2
00001c  f7fffffe          BL       BEBufToUint16
000020  4602              MOV      r2,r0
;;;1075   	value = BEBufToUint16(&g_tModS.RxBuf[4]);	/* ¼Ä´æÆ÷Öµ */
000022  1d20              ADDS     r0,r4,#4
000024  f7fffffe          BL       BEBufToUint16
000028  4601              MOV      r1,r0
;;;1076       
;;;1077   //    if(reg == 0x0E)
;;;1078   //    {
;;;1079   //        if(value == 00)
;;;1080   //        {
;;;1081   //            GPIO_SetBits(GPIOC,GPIO_Pin_10);//CC
;;;1082   //            flag_Load_CC = 1;
;;;1083   //        }else if(value == 01){
;;;1084   //            GPIO_ResetBits(GPIOC,GPIO_Pin_10);//CV
;;;1085   //            flag_Load_CC = 0;
;;;1086   //        }
;;;1087   //    }
;;;1088    	if (MODS_WriteRegValue(reg, value) == 1)	/* ¸Ãº¯Êý»á°ÑÐ´ÈëµÄÖµ´æÈë¼Ä´æÆ÷ */
00002a  4610              MOV      r0,r2
00002c  f7fffffe          BL       MODS_WriteRegValue
000030  2801              CMP      r0,#1
000032  d002              BEQ      |L8.58|
;;;1089    	{
;;;1090    		;
;;;1091    	}
;;;1092    	else
;;;1093    	{
;;;1094    		g_tModS.RspCode = RSP_ERR_REG_ADDR;		/* ¼Ä´æÆ÷µØÖ·´íÎó */
000034  2002              MOVS     r0,#2
000036  f88400a1          STRB     r0,[r4,#0xa1]
                  |L8.58|
;;;1095    	}
;;;1096   
;;;1097   err_ret:
;;;1098   	if (g_tModS.RspCode == RSP_OK)				/* ÕýÈ·Ó¦´ð */
00003a  f89400a1          LDRB     r0,[r4,#0xa1]  ; g_tModS
00003e  2800              CMP      r0,#0
000040  d003              BEQ      |L8.74|
;;;1099   	{
;;;1100   		
;;;1101   	}
;;;1102   	else
;;;1103   	{
;;;1104   		MODS_SendAckErr(g_tModS.RspCode);		/* ¸æËßÖ÷»úÃüÁî´íÎó */
000042  e8bd4010          POP      {r4,lr}
000046  f7ffbffe          B.W      MODS_SendAckErr
                  |L8.74|
;;;1105   	}
;;;1106   }
00004a  bd10              POP      {r4,pc}
;;;1107   
                          ENDP

                  |L8.76|
                          DCD      ||.bss||

                          AREA ||i.MODS_50H||, CODE, READONLY, ALIGN=2

                  MODS_50H PROC
;;;1107   
;;;1108   static void MODS_50H(void)
000000  b510              PUSH     {r4,lr}
;;;1109   {
;;;1110       uint16_t reg;
;;;1111   	uint16_t value;
;;;1112   
;;;1113   	g_tModS.RspCode = RSP_OK;
000002  4c13              LDR      r4,|L9.80|
000004  2000              MOVS     r0,#0
000006  f88400a1          STRB     r0,[r4,#0xa1]
;;;1114   
;;;1115   	if (g_tModS.RxCount != 8)
00000a  f894009e          LDRB     r0,[r4,#0x9e]  ; g_tModS
00000e  2808              CMP      r0,#8
000010  d003              BEQ      |L9.26|
;;;1116   	{
;;;1117   		g_tModS.RspCode = RSP_ERR_VALUE;		
000012  2003              MOVS     r0,#3
000014  f88400a1          STRB     r0,[r4,#0xa1]
;;;1118   		goto err_ret;
000018  e00f              B        |L9.58|
                  |L9.26|
;;;1119   	}
;;;1120   
;;;1121   	reg = BEBufToUint16(&g_tModS.RxBuf[2]);
00001a  1ca0              ADDS     r0,r4,#2
00001c  f7fffffe          BL       BEBufToUint16
000020  4602              MOV      r2,r0
;;;1122   	value = BEBufToUint16(&g_tModS.RxBuf[4]);
000022  1d20              ADDS     r0,r4,#4
000024  f7fffffe          BL       BEBufToUint16
000028  4601              MOV      r1,r0
;;;1123       
;;;1124   
;;;1125    	if (MODS_Load(reg, value) == 1)
00002a  4610              MOV      r0,r2
00002c  f7fffffe          BL       MODS_Load
000030  2801              CMP      r0,#1
000032  d002              BEQ      |L9.58|
;;;1126    	{
;;;1127    		;
;;;1128    	}
;;;1129    	else
;;;1130    	{
;;;1131    		g_tModS.RspCode = RSP_ERR_REG_ADDR;
000034  2002              MOVS     r0,#2
000036  f88400a1          STRB     r0,[r4,#0xa1]
                  |L9.58|
;;;1132    	}
;;;1133   
;;;1134   err_ret:
;;;1135   	if (g_tModS.RspCode == RSP_OK)
00003a  f89400a1          LDRB     r0,[r4,#0xa1]  ; g_tModS
00003e  b118              CBZ      r0,|L9.72|
;;;1136   	{
;;;1137   		MODS_SendAckOk();
;;;1138   	}
;;;1139   	else
;;;1140   	{
;;;1141   		MODS_SendAckErr(g_tModS.RspCode);
000040  e8bd4010          POP      {r4,lr}
000044  f7ffbffe          B.W      MODS_SendAckErr
                  |L9.72|
000048  e8bd4010          POP      {r4,lr}               ;1137
00004c  f7ffbffe          B.W      MODS_SendAckOk
;;;1142   	}
;;;1143   }
;;;1144   
                          ENDP

                  |L9.80|
                          DCD      ||.bss||

                          AREA ||i.MODS_51H||, CODE, READONLY, ALIGN=2

                  MODS_51H PROC
;;;1144   
;;;1145   static void MODS_51H(void)
000000  b510              PUSH     {r4,lr}
;;;1146   {
;;;1147       uint16_t reg;
;;;1148   	uint16_t value;
;;;1149   
;;;1150   	g_tModS.RspCode = RSP_OK;
000002  4c13              LDR      r4,|L10.80|
000004  2000              MOVS     r0,#0
000006  f88400a1          STRB     r0,[r4,#0xa1]
;;;1151   
;;;1152   	if (g_tModS.RxCount != 8)
00000a  f894009e          LDRB     r0,[r4,#0x9e]  ; g_tModS
00000e  2808              CMP      r0,#8
000010  d003              BEQ      |L10.26|
;;;1153   	{
;;;1154   		g_tModS.RspCode = RSP_ERR_VALUE;		
000012  2003              MOVS     r0,#3
000014  f88400a1          STRB     r0,[r4,#0xa1]
;;;1155   		goto err_ret;
000018  e00f              B        |L10.58|
                  |L10.26|
;;;1156   	}
;;;1157   
;;;1158   	reg = BEBufToUint16(&g_tModS.RxBuf[2]);
00001a  1ca0              ADDS     r0,r4,#2
00001c  f7fffffe          BL       BEBufToUint16
000020  4602              MOV      r2,r0
;;;1159   	value = BEBufToUint16(&g_tModS.RxBuf[4]);
000022  1d20              ADDS     r0,r4,#4
000024  f7fffffe          BL       BEBufToUint16
000028  4601              MOV      r1,r0
;;;1160       
;;;1161   
;;;1162    	if (MODS_Pow(reg, value) == 1)
00002a  4610              MOV      r0,r2
00002c  f7fffffe          BL       MODS_Pow
000030  2801              CMP      r0,#1
000032  d002              BEQ      |L10.58|
;;;1163    	{
;;;1164    		;
;;;1165    	}
;;;1166    	else
;;;1167    	{
;;;1168    		g_tModS.RspCode = RSP_ERR_REG_ADDR;
000034  2002              MOVS     r0,#2
000036  f88400a1          STRB     r0,[r4,#0xa1]
                  |L10.58|
;;;1169    	}
;;;1170   
;;;1171   err_ret:
;;;1172   	if (g_tModS.RspCode == RSP_OK)
00003a  f89400a1          LDRB     r0,[r4,#0xa1]  ; g_tModS
00003e  b118              CBZ      r0,|L10.72|
;;;1173   	{
;;;1174   		MODS_SendAckOk();
;;;1175   	}
;;;1176   	else
;;;1177   	{
;;;1178   		MODS_SendAckErr(g_tModS.RspCode);
000040  e8bd4010          POP      {r4,lr}
000044  f7ffbffe          B.W      MODS_SendAckErr
                  |L10.72|
000048  e8bd4010          POP      {r4,lr}               ;1174
00004c  f7ffbffe          B.W      MODS_SendAckOk
;;;1179   	}
;;;1180   }
;;;1181   
                          ENDP

                  |L10.80|
                          DCD      ||.bss||

                          AREA ||i.MODS_52H||, CODE, READONLY, ALIGN=2

                  MODS_52H PROC
;;;1181   
;;;1182   static void MODS_52H(void)
000000  b510              PUSH     {r4,lr}
;;;1183   {
;;;1184       uint16_t reg;
;;;1185   	uint16_t value;
;;;1186   
;;;1187   	g_tModS.RspCode = RSP_OK;
000002  4c13              LDR      r4,|L11.80|
000004  2000              MOVS     r0,#0
000006  f88400a1          STRB     r0,[r4,#0xa1]
;;;1188   
;;;1189   	if (g_tModS.RxCount != 8)
00000a  f894009e          LDRB     r0,[r4,#0x9e]  ; g_tModS
00000e  2808              CMP      r0,#8
000010  d003              BEQ      |L11.26|
;;;1190   	{
;;;1191   		g_tModS.RspCode = RSP_ERR_VALUE;		
000012  2003              MOVS     r0,#3
000014  f88400a1          STRB     r0,[r4,#0xa1]
;;;1192   		goto err_ret;
000018  e00f              B        |L11.58|
                  |L11.26|
;;;1193   	}
;;;1194   
;;;1195   	reg = BEBufToUint16(&g_tModS.RxBuf[2]);
00001a  1ca0              ADDS     r0,r4,#2
00001c  f7fffffe          BL       BEBufToUint16
000020  4602              MOV      r2,r0
;;;1196   	value = BEBufToUint16(&g_tModS.RxBuf[4]);
000022  1d20              ADDS     r0,r4,#4
000024  f7fffffe          BL       BEBufToUint16
000028  4601              MOV      r1,r0
;;;1197       
;;;1198   
;;;1199    	if (MODS_CDC(reg, value) == 1)
00002a  4610              MOV      r0,r2
00002c  f7fffffe          BL       MODS_CDC
000030  2801              CMP      r0,#1
000032  d002              BEQ      |L11.58|
;;;1200    	{
;;;1201   		
;;;1202    	}
;;;1203    	else
;;;1204    	{
;;;1205    		g_tModS.RspCode = RSP_ERR_REG_ADDR;
000034  2002              MOVS     r0,#2
000036  f88400a1          STRB     r0,[r4,#0xa1]
                  |L11.58|
;;;1206    	}
;;;1207   
;;;1208   err_ret:
;;;1209   	if (g_tModS.RspCode == RSP_OK)
00003a  f89400a1          LDRB     r0,[r4,#0xa1]  ; g_tModS
00003e  b118              CBZ      r0,|L11.72|
;;;1210   	{
;;;1211   		MODS_SendAckOk();
;;;1212   	}
;;;1213   	else
;;;1214   	{
;;;1215   		MODS_SendAckErr(g_tModS.RspCode);
000040  e8bd4010          POP      {r4,lr}
000044  f7ffbffe          B.W      MODS_SendAckErr
                  |L11.72|
000048  e8bd4010          POP      {r4,lr}               ;1211
00004c  f7ffbffe          B.W      MODS_SendAckOk
;;;1216   	}
;;;1217   }
;;;1218   
                          ENDP

                  |L11.80|
                          DCD      ||.bss||

                          AREA ||i.MODS_CDC||, CODE, READONLY, ALIGN=2

                  MODS_CDC PROC
;;;874    
;;;875    static uint8_t MODS_CDC(uint16_t reg_addr, uint16_t reg_value)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;876    {
;;;877    	lock = 1;
000004  4a42              LDR      r2,|L12.272|
000006  2401              MOVS     r4,#1
000008  7014              STRB     r4,[r2,#0]
;;;878    	switch (reg_addr)							
00000a  2812              CMP      r0,#0x12
00000c  d27d              BCS      |L12.266|
00000e  e8dff000          TBB      [pc,r0]
000012  0978              DCB      0x09,0x78
000014  78787878          DCB      0x78,0x78,0x78,0x78
000018  78787878          DCB      0x78,0x78,0x78,0x78
00001c  78787878          DCB      0x78,0x78,0x78,0x78
000020  78787878          DCB      0x78,0x78,0x78,0x78
;;;879    	{	
;;;880    		case SLAVE_REG_P00://å¼€å§‹åœæ­¢ç”µæº
;;;881    			if(reg_value == 1)//å¼€å§‹ç”µæº
000024  2500              MOVS     r5,#0
;;;882    			{
;;;883    				WM_DeleteWindow(hWinR);
;;;884    				WM_DeleteWindow(hWinWind);
;;;885    				WM_DeleteWindow(hWinG);
;;;886    				WM_DeleteWindow(load_wind);
;;;887    				WM_DeleteWindow(hWinsysinfo);
;;;888    				WM_DeleteWindow(hWincdc);
;;;889    				WM_DeleteWindow(hWinset);				
;;;890    				CreateCDC(); 
;;;891    				Delay_ms(500);
;;;892    				GPIO_ResetBits(GPIOC,GPIO_Pin_1);//Ú˜Ò•Ö§Ô´Ë¤Ô¶
000026  f8df90ec          LDR      r9,|L12.276|
;;;893    				Delay_ms(500);
;;;894    				GPIO_SetBits(GPIOC,GPIO_Pin_13);//Ú˜Ò•Ö§Ô´Ë¤Ô¶ÝŒÖ§Æ
;;;895    				SET_Voltage = opv1;
;;;896    			    SET_Current = opc1;
;;;897    			    cutoff_flag = 0;
;;;898    //                           Mode_SW_CONT(0x03);
;;;899    			   
;;;900    			    charge_step = 1;
;;;901    			    GPIO_ResetBits(GPIOC,GPIO_Pin_13);//Õ²ßªÖ§Ô´Ë¤Ô¶ÝŒÖ§Ç·
;;;902    			    Delay_ms(500);
;;;903    			    GPIO_SetBits(GPIOC,GPIO_Pin_1);//Õ²ßªÖ§Ô´Ë¤Ô¶
;;;904    			    mode_sw = mode_pow;
00002a  4e3b              LDR      r6,|L12.280|
;;;905    			    cdc_sw = cdc_on;
00002c  4f3b              LDR      r7,|L12.284|
;;;906    				rmtrig[2] = 1;
00002e  f8df80f0          LDR      r8,|L12.288|
000032  f44f7afa          MOV      r10,#0x1f4            ;891
000036  f44f5b00          MOV      r11,#0x2000           ;894
00003a  2901              CMP      r1,#1                 ;881
00003c  d002              BEQ      |L12.68|
;;;907    				sendmodeflag = 1;
;;;908    			}else if(reg_value == 4){//åœæ­¢ç”µæº
00003e  2904              CMP      r1,#4
000040  d049              BEQ      |L12.214|
000042  e05e              B        |L12.258|
                  |L12.68|
000044  4837              LDR      r0,|L12.292|
000046  6800              LDR      r0,[r0,#0]            ;883  ; hWinR
000048  f7fffffe          BL       WM_DeleteWindow
00004c  4836              LDR      r0,|L12.296|
00004e  6800              LDR      r0,[r0,#0]            ;884  ; hWinWind
000050  f7fffffe          BL       WM_DeleteWindow
000054  4835              LDR      r0,|L12.300|
000056  6800              LDR      r0,[r0,#0]            ;885  ; hWinG
000058  f7fffffe          BL       WM_DeleteWindow
00005c  4834              LDR      r0,|L12.304|
00005e  6800              LDR      r0,[r0,#0]            ;886  ; load_wind
000060  f7fffffe          BL       WM_DeleteWindow
000064  4833              LDR      r0,|L12.308|
000066  6800              LDR      r0,[r0,#0]            ;887  ; hWinsysinfo
000068  f7fffffe          BL       WM_DeleteWindow
00006c  4832              LDR      r0,|L12.312|
00006e  6800              LDR      r0,[r0,#0]            ;888  ; hWincdc
000070  f7fffffe          BL       WM_DeleteWindow
000074  4831              LDR      r0,|L12.316|
000076  6800              LDR      r0,[r0,#0]            ;889  ; hWinset
000078  f7fffffe          BL       WM_DeleteWindow
00007c  f7fffffe          BL       CreateCDC
000080  4650              MOV      r0,r10                ;891
000082  f7fffffe          BL       Delay_ms
000086  2102              MOVS     r1,#2                 ;892
000088  4648              MOV      r0,r9                 ;892
00008a  f7fffffe          BL       GPIO_ResetBits
00008e  4650              MOV      r0,r10                ;893
000090  f7fffffe          BL       Delay_ms
000094  4659              MOV      r1,r11                ;894
000096  4648              MOV      r0,r9                 ;894
000098  f7fffffe          BL       GPIO_SetBits
00009c  4828              LDR      r0,|L12.320|
00009e  6fc1              LDR      r1,[r0,#0x7c]         ;895  ; Run_Control
0000a0  6041              STR      r1,[r0,#4]            ;895  ; Run_Control
0000a2  f8d01088          LDR      r1,[r0,#0x88]         ;896  ; Run_Control
0000a6  6081              STR      r1,[r0,#8]            ;896  ; Run_Control
0000a8  4826              LDR      r0,|L12.324|
0000aa  7005              STRB     r5,[r0,#0]            ;897
0000ac  4826              LDR      r0,|L12.328|
0000ae  7004              STRB     r4,[r0,#0]            ;900
0000b0  4659              MOV      r1,r11                ;901
0000b2  4648              MOV      r0,r9                 ;901
0000b4  f7fffffe          BL       GPIO_ResetBits
0000b8  4650              MOV      r0,r10                ;902
0000ba  f7fffffe          BL       Delay_ms
0000be  2102              MOVS     r1,#2                 ;903
0000c0  4648              MOV      r0,r9                 ;903
0000c2  f7fffffe          BL       GPIO_SetBits
0000c6  2003              MOVS     r0,#3                 ;904
0000c8  7030              STRB     r0,[r6,#0]            ;904
0000ca  703c              STRB     r4,[r7,#0]            ;905
0000cc  f8884002          STRB     r4,[r8,#2]            ;906
0000d0  481e              LDR      r0,|L12.332|
0000d2  7004              STRB     r4,[r0,#0]            ;907
0000d4  e015              B        |L12.258|
                  |L12.214|
;;;909    				GPIO_ResetBits(GPIOC,GPIO_Pin_1);//Ú˜Ò•Ö§Ô´Ë¤Ô¶
0000d6  2102              MOVS     r1,#2
0000d8  4648              MOV      r0,r9
0000da  f7fffffe          BL       GPIO_ResetBits
;;;910    				Delay_ms(500);
0000de  4650              MOV      r0,r10
0000e0  f7fffffe          BL       Delay_ms
;;;911    			   GPIO_SetBits(GPIOC,GPIO_Pin_13);//Ú˜Ò•Ö§Ô´Ë¤Ô¶ÝŒÖ§Ç·
0000e4  4659              MOV      r1,r11
0000e6  4648              MOV      r0,r9
0000e8  f7fffffe          BL       GPIO_SetBits
;;;912    			   GPIO_SetBits(GPIOA,GPIO_Pin_15);//Ö§Ø“ØºÕ˜OFF
0000ec  f44f4100          MOV      r1,#0x8000
0000f0  4817              LDR      r0,|L12.336|
0000f2  f7fffffe          BL       GPIO_SetBits
;;;913    			   cdc_sw = cdc_off;
0000f6  703d              STRB     r5,[r7,#0]
;;;914    			   paused = 0;
0000f8  4816              LDR      r0,|L12.340|
0000fa  7005              STRB     r5,[r0,#0]
;;;915    			   mode_sw = 0;
0000fc  7035              STRB     r5,[r6,#0]
;;;916    			   rmtrig[2] = 0;
0000fe  f8885002          STRB     r5,[r8,#2]
                  |L12.258|
;;;917    			}
;;;918    			break;
;;;919    		case SLAVE_REG_P01://
;;;920    
;;;921    			break;
;;;922    		
;;;923    		case SLAVE_REG_P02://
;;;924    
;;;925    			break;
;;;926    		case SLAVE_REG_P03://
;;;927    
;;;928    			break;
;;;929    
;;;930    		case SLAVE_REG_P04://
;;;931    
;;;932    			break;
;;;933    		case SLAVE_REG_P05://
;;;934    
;;;935    			break;
;;;936    
;;;937    		case SLAVE_REG_P06://
;;;938    
;;;939    			break;
;;;940    		case SLAVE_REG_P07://
;;;941    
;;;942    			break;
;;;943    		case SLAVE_REG_P08://
;;;944    
;;;945    			break;
;;;946    		case SLAVE_REG_P09:	//
;;;947    
;;;948    			break;
;;;949    		case SLAVE_REG_P10:	//
;;;950    
;;;951    			break;
;;;952    
;;;953    		case SLAVE_REG_P11://
;;;954    
;;;955    			break;
;;;956    		case SLAVE_REG_P12:
;;;957    			break;
;;;958    
;;;959    		case SLAVE_REG_P13:
;;;960    			break;
;;;961    		case SLAVE_REG_P14:
;;;962    			break;
;;;963    
;;;964    		case SLAVE_REG_P15:
;;;965    			break;
;;;966    		case SLAVE_REG_P16:
;;;967    			break;
;;;968    
;;;969    		case SLAVE_REG_P17:
;;;970    			break;
;;;971    		default:
;;;972    			return 0;
;;;973    	}
;;;974    
;;;975    	return 1;
000102  2001              MOVS     r0,#1
                  |L12.260|
;;;976    }
000104  e8bd9ff0          POP      {r4-r12,pc}
000108  e7ff              B        |L12.266|
                  |L12.266|
00010a  2000              MOVS     r0,#0                 ;972
00010c  e7fa              B        |L12.260|
;;;977    
                          ENDP

00010e  0000              DCW      0x0000
                  |L12.272|
                          DCD      lock
                  |L12.276|
                          DCD      0x40020800
                  |L12.280|
                          DCD      mode_sw
                  |L12.284|
                          DCD      cdc_sw
                  |L12.288|
                          DCD      ||.data||+0x3
                  |L12.292|
                          DCD      hWinR
                  |L12.296|
                          DCD      hWinWind
                  |L12.300|
                          DCD      hWinG
                  |L12.304|
                          DCD      load_wind
                  |L12.308|
                          DCD      hWinsysinfo
                  |L12.312|
                          DCD      hWincdc
                  |L12.316|
                          DCD      hWinset
                  |L12.320|
                          DCD      Run_Control
                  |L12.324|
                          DCD      cutoff_flag
                  |L12.328|
                          DCD      charge_step
                  |L12.332|
                          DCD      sendmodeflag
                  |L12.336|
                          DCD      0x40020000
                  |L12.340|
                          DCD      paused

                          AREA ||i.MODS_Load||, CODE, READONLY, ALIGN=2

                  MODS_Load PROC
;;;680    
;;;681    static uint8_t MODS_Load(uint16_t reg_addr, uint16_t reg_value)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;682    {
;;;683    	lock = 1;
000004  4a43              LDR      r2,|L13.276|
000006  2501              MOVS     r5,#1
000008  7015              STRB     r5,[r2,#0]
;;;684    	switch (reg_addr)							
00000a  2812              CMP      r0,#0x12
00000c  d27f              BCS      |L13.270|
00000e  e8dff000          TBB      [pc,r0]
000012  097a              DCB      0x09,0x7a
000014  7a7a7a7a          DCB      0x7a,0x7a,0x7a,0x7a
000018  7a7a7a7a          DCB      0x7a,0x7a,0x7a,0x7a
00001c  7a7a7a7a          DCB      0x7a,0x7a,0x7a,0x7a
000020  7a7a7a7a          DCB      0x7a,0x7a,0x7a,0x7a
;;;685    	{	
;;;686    		case SLAVE_REG_P00://å¼€å§‹åœæ­¢è´Ÿè½½
;;;687    			if(reg_value == 1)//å¼€å§‹è´Ÿè½½
000024  2400              MOVS     r4,#0
;;;688    			{
;;;689    				WM_DeleteWindow(hWinR);
;;;690    				WM_DeleteWindow(hWinWind);
;;;691    				WM_DeleteWindow(hWinG);
;;;692    				WM_DeleteWindow(load_wind);
;;;693    				WM_DeleteWindow(hWinsysinfo);
;;;694    				WM_DeleteWindow(hWincdc);
;;;695    				WM_DeleteWindow(hWinset);
;;;696    				CreateWindow2();
;;;697    				Delay_ms(500);
;;;698    				t_onoff = 0;
;;;699    				GPIO_ResetBits(GPIOC,GPIO_Pin_1);
;;;700    				Delay_ms(500);
;;;701    				GPIO_SetBits(GPIOC,GPIO_Pin_13);
;;;702    				
;;;703    				if(flag_Load_CC == 0)
;;;704    				{
;;;705    					GPIO_ResetBits(GPIOC,GPIO_Pin_13);
;;;706    					c_rec = 1;									
000026  4f3c              LDR      r7,|L13.280|
;;;707    				}
;;;708    				Flag_Swtich_ON=1;
000028  4e3c              LDR      r6,|L13.284|
;;;709    				GPIO_ResetBits(GPIOA,GPIO_Pin_15);
;;;710    				
;;;711    				mode_sw = mode_load;
00002a  f8df80f4          LDR      r8,|L13.288|
;;;712    				load_sw = load_on;
00002e  f8df90f4          LDR      r9,|L13.292|
;;;713    				rmtrig[0] = 1;
000032  f8dfa0f4          LDR      r10,|L13.296|
000036  f8dfb0f4          LDR      r11,|L13.300|
00003a  2901              CMP      r1,#1                 ;687
00003c  d002              BEQ      |L13.68|
;;;714    			}else if(reg_value == 4){//åœæ­¢è´Ÿè½½
00003e  2904              CMP      r1,#4
000040  d04c              BEQ      |L13.220|
000042  e060              B        |L13.262|
                  |L13.68|
000044  483a              LDR      r0,|L13.304|
000046  6800              LDR      r0,[r0,#0]            ;689  ; hWinR
000048  f7fffffe          BL       WM_DeleteWindow
00004c  4839              LDR      r0,|L13.308|
00004e  6800              LDR      r0,[r0,#0]            ;690  ; hWinWind
000050  f7fffffe          BL       WM_DeleteWindow
000054  4838              LDR      r0,|L13.312|
000056  6800              LDR      r0,[r0,#0]            ;691  ; hWinG
000058  f7fffffe          BL       WM_DeleteWindow
00005c  4837              LDR      r0,|L13.316|
00005e  6800              LDR      r0,[r0,#0]            ;692  ; load_wind
000060  f7fffffe          BL       WM_DeleteWindow
000064  4836              LDR      r0,|L13.320|
000066  6800              LDR      r0,[r0,#0]            ;693  ; hWinsysinfo
000068  f7fffffe          BL       WM_DeleteWindow
00006c  4835              LDR      r0,|L13.324|
00006e  6800              LDR      r0,[r0,#0]            ;694  ; hWincdc
000070  f7fffffe          BL       WM_DeleteWindow
000074  4834              LDR      r0,|L13.328|
000076  6800              LDR      r0,[r0,#0]            ;695  ; hWinset
000078  f7fffffe          BL       WM_DeleteWindow
00007c  f7fffffe          BL       CreateWindow2
000080  f44f70fa          MOV      r0,#0x1f4             ;697
000084  f7fffffe          BL       Delay_ms
000088  4830              LDR      r0,|L13.332|
00008a  7004              STRB     r4,[r0,#0]            ;698
00008c  2102              MOVS     r1,#2                 ;699
00008e  4658              MOV      r0,r11                ;699
000090  f7fffffe          BL       GPIO_ResetBits
000094  f44f70fa          MOV      r0,#0x1f4             ;700
000098  f7fffffe          BL       Delay_ms
00009c  f44f5400          MOV      r4,#0x2000            ;701
0000a0  4621              MOV      r1,r4                 ;701
0000a2  4658              MOV      r0,r11                ;701
0000a4  f7fffffe          BL       GPIO_SetBits
0000a8  4829              LDR      r0,|L13.336|
0000aa  7800              LDRB     r0,[r0,#0]            ;703  ; flagD
0000ac  0600              LSLS     r0,r0,#24             ;703
0000ae  d404              BMI      |L13.186|
0000b0  4621              MOV      r1,r4                 ;705
0000b2  4658              MOV      r0,r11                ;705
0000b4  f7fffffe          BL       GPIO_ResetBits
0000b8  703d              STRB     r5,[r7,#0]            ;706
                  |L13.186|
0000ba  6830              LDR      r0,[r6,#0]            ;708  ; flagA
0000bc  f0400040          ORR      r0,r0,#0x40           ;708
0000c0  6030              STR      r0,[r6,#0]            ;708  ; flagA
0000c2  f44f4100          MOV      r1,#0x8000            ;709
0000c6  4823              LDR      r0,|L13.340|
0000c8  f7fffffe          BL       GPIO_ResetBits
0000cc  2002              MOVS     r0,#2                 ;711
0000ce  f8880000          STRB     r0,[r8,#0]            ;711
0000d2  f8895000          STRB     r5,[r9,#0]            ;712
0000d6  f88a5000          STRB     r5,[r10,#0]           ;713
0000da  e014              B        |L13.262|
                  |L13.220|
;;;715    				Flag_Swtich_ON=0;
0000dc  6830              LDR      r0,[r6,#0]  ; flagA
0000de  f0200040          BIC      r0,r0,#0x40
0000e2  6030              STR      r0,[r6,#0]  ; flagA
;;;716    				GPIO_SetBits(GPIOC,GPIO_Pin_13);
0000e4  f44f5100          MOV      r1,#0x2000
0000e8  4658              MOV      r0,r11
0000ea  f7fffffe          BL       GPIO_SetBits
;;;717    				GPIO_SetBits(GPIOA,GPIO_Pin_15);
0000ee  f44f4100          MOV      r1,#0x8000
0000f2  4818              LDR      r0,|L13.340|
0000f4  f7fffffe          BL       GPIO_SetBits
;;;718    				c_rec = 0;
0000f8  703c              STRB     r4,[r7,#0]
;;;719    				mode_sw = 0;
0000fa  f8884000          STRB     r4,[r8,#0]
;;;720    				load_sw = load_off;
0000fe  f8894000          STRB     r4,[r9,#0]
;;;721    				rmtrig[0] = 0;
000102  f88a4000          STRB     r4,[r10,#0]
                  |L13.262|
;;;722    			}
;;;723    			break;
;;;724    		case SLAVE_REG_P01://
;;;725    
;;;726    			break;
;;;727    		
;;;728    		case SLAVE_REG_P02://
;;;729    
;;;730    			break;
;;;731    		case SLAVE_REG_P03://
;;;732    
;;;733    			break;
;;;734    
;;;735    		case SLAVE_REG_P04://
;;;736    
;;;737    			break;
;;;738    		case SLAVE_REG_P05://
;;;739    
;;;740    			break;
;;;741    
;;;742    		case SLAVE_REG_P06://
;;;743    
;;;744    			break;
;;;745    		case SLAVE_REG_P07://
;;;746    
;;;747    			break;
;;;748    		case SLAVE_REG_P08://
;;;749    
;;;750    			break;
;;;751    		case SLAVE_REG_P09:	//
;;;752    
;;;753    			break;
;;;754    		case SLAVE_REG_P10:	//
;;;755    
;;;756    			break;
;;;757    
;;;758    		case SLAVE_REG_P11://
;;;759    
;;;760    			break;
;;;761    		case SLAVE_REG_P12:
;;;762    			break;
;;;763    
;;;764    		case SLAVE_REG_P13:
;;;765    			break;
;;;766    		case SLAVE_REG_P14:
;;;767    			break;
;;;768    
;;;769    		case SLAVE_REG_P15:
;;;770    			break;
;;;771    		case SLAVE_REG_P16:
;;;772    			break;
;;;773    
;;;774    		case SLAVE_REG_P17:
;;;775    			break;
;;;776    		default:
;;;777    			return 0;
;;;778    	}
;;;779    
;;;780    	return 1;
000106  2001              MOVS     r0,#1
                  |L13.264|
;;;781    }
000108  e8bd9ff0          POP      {r4-r12,pc}
00010c  e7ff              B        |L13.270|
                  |L13.270|
00010e  2000              MOVS     r0,#0                 ;777
000110  e7fa              B        |L13.264|
;;;782    
                          ENDP

000112  0000              DCW      0x0000
                  |L13.276|
                          DCD      lock
                  |L13.280|
                          DCD      c_rec
                  |L13.284|
                          DCD      flagA
                  |L13.288|
                          DCD      mode_sw
                  |L13.292|
                          DCD      load_sw
                  |L13.296|
                          DCD      ||.data||+0x3
                  |L13.300|
                          DCD      0x40020800
                  |L13.304|
                          DCD      hWinR
                  |L13.308|
                          DCD      hWinWind
                  |L13.312|
                          DCD      hWinG
                  |L13.316|
                          DCD      load_wind
                  |L13.320|
                          DCD      hWinsysinfo
                  |L13.324|
                          DCD      hWincdc
                  |L13.328|
                          DCD      hWinset
                  |L13.332|
                          DCD      t_onoff
                  |L13.336|
                          DCD      flagD
                  |L13.340|
                          DCD      0x40020000

                          AREA ||i.MODS_Pow||, CODE, READONLY, ALIGN=2

                  MODS_Pow PROC
;;;782    
;;;783    static uint8_t MODS_Pow(uint16_t reg_addr, uint16_t reg_value)
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;784    {
;;;785    	lock = 1;
000004  4a33              LDR      r2,|L14.212|
000006  2401              MOVS     r4,#1
000008  7014              STRB     r4,[r2,#0]
;;;786    	switch (reg_addr)							
00000a  2812              CMP      r0,#0x12
00000c  d25f              BCS      |L14.206|
00000e  e8dff000          TBB      [pc,r0]
000012  095b              DCB      0x09,0x5b
000014  5b5b5b5b          DCB      0x5b,0x5b,0x5b,0x5b
000018  5b5b5b5b          DCB      0x5b,0x5b,0x5b,0x5b
00001c  5b5b5b5b          DCB      0x5b,0x5b,0x5b,0x5b
000020  5b5b5b5b          DCB      0x5b,0x5b,0x5b,0x5b
;;;787    	{	
;;;788    		case SLAVE_REG_P00://å¼€å§‹åœæ­¢ç”µæº
;;;789    			if(reg_value == 1)//å¼€å§‹ç”µæº
;;;790    			{
;;;791    				WM_DeleteWindow(hWinR);
;;;792    				WM_DeleteWindow(hWinWind);
;;;793    				WM_DeleteWindow(hWinG);
;;;794    				WM_DeleteWindow(load_wind);
;;;795    				WM_DeleteWindow(hWinsysinfo);
;;;796    				WM_DeleteWindow(hWincdc);
;;;797    				WM_DeleteWindow(hWinset);
;;;798    				CreateWindow();
;;;799    				Delay_ms(500);
;;;800    				GPIO_SetBits(GPIOA,GPIO_Pin_15);
;;;801    				GPIO_ResetBits(GPIOC,GPIO_Pin_13);//Õ²ßªÖ§Ô´Ë¤Ô¶ÝŒÖ§Ç·
000024  4f2c              LDR      r7,|L14.216|
;;;802    				GPIO_SetBits(GPIOC,GPIO_Pin_1);//Õ²ßªÖ§Ô´Ë¤Ô¶                           
;;;803    				mode_sw = mode_pow;
000026  f8df80b4          LDR      r8,|L14.220|
;;;804    				pow_sw = pow_on;
00002a  4e2d              LDR      r6,|L14.224|
;;;805    				rmtrig[1] = 1;
00002c  4d2d              LDR      r5,|L14.228|
00002e  f44f5900          MOV      r9,#0x2000            ;801
000032  2901              CMP      r1,#1                 ;789
000034  d002              BEQ      |L14.60|
;;;806    					
;;;807    			}else if(reg_value == 4){//åœæ­¢ç”µæº
000036  2904              CMP      r1,#4
000038  d035              BEQ      |L14.166|
00003a  e045              B        |L14.200|
                  |L14.60|
00003c  482a              LDR      r0,|L14.232|
00003e  6800              LDR      r0,[r0,#0]            ;791  ; hWinR
000040  f7fffffe          BL       WM_DeleteWindow
000044  4829              LDR      r0,|L14.236|
000046  6800              LDR      r0,[r0,#0]            ;792  ; hWinWind
000048  f7fffffe          BL       WM_DeleteWindow
00004c  4828              LDR      r0,|L14.240|
00004e  6800              LDR      r0,[r0,#0]            ;793  ; hWinG
000050  f7fffffe          BL       WM_DeleteWindow
000054  4827              LDR      r0,|L14.244|
000056  6800              LDR      r0,[r0,#0]            ;794  ; load_wind
000058  f7fffffe          BL       WM_DeleteWindow
00005c  4826              LDR      r0,|L14.248|
00005e  6800              LDR      r0,[r0,#0]            ;795  ; hWinsysinfo
000060  f7fffffe          BL       WM_DeleteWindow
000064  4825              LDR      r0,|L14.252|
000066  6800              LDR      r0,[r0,#0]            ;796  ; hWincdc
000068  f7fffffe          BL       WM_DeleteWindow
00006c  4824              LDR      r0,|L14.256|
00006e  6800              LDR      r0,[r0,#0]            ;797  ; hWinset
000070  f7fffffe          BL       WM_DeleteWindow
000074  f7fffffe          BL       CreateWindow
000078  f44f70fa          MOV      r0,#0x1f4             ;799
00007c  f7fffffe          BL       Delay_ms
000080  f44f4100          MOV      r1,#0x8000            ;800
000084  481f              LDR      r0,|L14.260|
000086  f7fffffe          BL       GPIO_SetBits
00008a  4649              MOV      r1,r9                 ;801
00008c  4638              MOV      r0,r7                 ;801
00008e  f7fffffe          BL       GPIO_ResetBits
000092  2102              MOVS     r1,#2                 ;802
000094  4638              MOV      r0,r7                 ;802
000096  f7fffffe          BL       GPIO_SetBits
00009a  2003              MOVS     r0,#3                 ;803
00009c  f8880000          STRB     r0,[r8,#0]            ;803
0000a0  7034              STRB     r4,[r6,#0]            ;804
0000a2  706c              STRB     r4,[r5,#1]            ;805
0000a4  e010              B        |L14.200|
                  |L14.166|
;;;808    				GPIO_ResetBits(GPIOC,GPIO_Pin_1);//Ú˜Ò•Ö§Ô´Ë¤Ô¶
0000a6  2102              MOVS     r1,#2
0000a8  4638              MOV      r0,r7
0000aa  f7fffffe          BL       GPIO_ResetBits
;;;809    				Delay_ms(1000);
0000ae  f44f707a          MOV      r0,#0x3e8
0000b2  f7fffffe          BL       Delay_ms
;;;810    				GPIO_SetBits(GPIOC,GPIO_Pin_13);//Ú˜Ò•Ö§Ô´Ë¤Ô¶ÝŒÖ§Ç·
0000b6  4649              MOV      r1,r9
0000b8  4638              MOV      r0,r7
0000ba  f7fffffe          BL       GPIO_SetBits
;;;811    				mode_sw = 0;
0000be  2000              MOVS     r0,#0
0000c0  f8880000          STRB     r0,[r8,#0]
;;;812    				pow_sw = pow_off;
0000c4  7030              STRB     r0,[r6,#0]
;;;813    				rmtrig[1] = 0;
0000c6  7068              STRB     r0,[r5,#1]
                  |L14.200|
;;;814    			}
;;;815    			break;
;;;816    		case SLAVE_REG_P01://
;;;817    
;;;818    			break;
;;;819    		
;;;820    		case SLAVE_REG_P02://
;;;821    
;;;822    			break;
;;;823    		case SLAVE_REG_P03://
;;;824    
;;;825    			break;
;;;826    
;;;827    		case SLAVE_REG_P04://
;;;828    
;;;829    			break;
;;;830    		case SLAVE_REG_P05://
;;;831    
;;;832    			break;
;;;833    
;;;834    		case SLAVE_REG_P06://
;;;835    
;;;836    			break;
;;;837    		case SLAVE_REG_P07://
;;;838    
;;;839    			break;
;;;840    		case SLAVE_REG_P08://
;;;841    
;;;842    			break;
;;;843    		case SLAVE_REG_P09:	//
;;;844    
;;;845    			break;
;;;846    		case SLAVE_REG_P10:	//
;;;847    
;;;848    			break;
;;;849    
;;;850    		case SLAVE_REG_P11://
;;;851    
;;;852    			break;
;;;853    		case SLAVE_REG_P12:
;;;854    			break;
;;;855    
;;;856    		case SLAVE_REG_P13:
;;;857    			break;
;;;858    		case SLAVE_REG_P14:
;;;859    			break;
;;;860    
;;;861    		case SLAVE_REG_P15:
;;;862    			break;
;;;863    		case SLAVE_REG_P16:
;;;864    			break;
;;;865    
;;;866    		case SLAVE_REG_P17:
;;;867    			break;
;;;868    		default:
;;;869    			return 0;
;;;870    	}
;;;871    
;;;872    	return 1;
0000c8  2001              MOVS     r0,#1
                  |L14.202|
;;;873    }
0000ca  e8bd87f0          POP      {r4-r10,pc}
                  |L14.206|
0000ce  2000              MOVS     r0,#0                 ;869
0000d0  e7fb              B        |L14.202|
;;;874    
                          ENDP

0000d2  0000              DCW      0x0000
                  |L14.212|
                          DCD      lock
                  |L14.216|
                          DCD      0x40020800
                  |L14.220|
                          DCD      mode_sw
                  |L14.224|
                          DCD      pow_sw
                  |L14.228|
                          DCD      ||.data||+0x3
                  |L14.232|
                          DCD      hWinR
                  |L14.236|
                          DCD      hWinWind
                  |L14.240|
                          DCD      hWinG
                  |L14.244|
                          DCD      load_wind
                  |L14.248|
                          DCD      hWinsysinfo
                  |L14.252|
                          DCD      hWincdc
                  |L14.256|
                          DCD      hWinset
                  |L14.260|
                          DCD      0x40020000

                          AREA ||i.MODS_ReadRegValue||, CODE, READONLY, ALIGN=2

                  MODS_ReadRegValue PROC
;;;485    */
;;;486    static uint8_t MODS_ReadRegValue(uint16_t reg_addr, uint8_t *reg_value)
000000  b570              PUSH     {r4-r6,lr}
;;;487    {
000002  460d              MOV      r5,r1
000004  ed2d8b02          VPUSH    {d8}
;;;488        uint16_t value;
;;;489    	lock = 1;
000008  2601              MOVS     r6,#1
00000a  494b              LDR      r1,|L15.312|
00000c  700e              STRB     r6,[r1,#0]
;;;490    	switch (reg_addr)									/* ÅÐ¶Ï¼Ä´æÆ÷µØÖ· */
;;;491    	{
;;;492            case SLAVE_REG_P00:
;;;493    //			C_SW(1);
;;;494    			v= DISS_Voltage;
00000e  494b              LDR      r1,|L15.316|
;;;495    			value =	R_VLUE;	
000010  4c4b              LDR      r4,|L15.320|
;;;496    			break;
;;;497    		case SLAVE_REG_P01:
;;;498                shortv = DISS_Voltage;
;;;499    			value =	(int)(DISS_Voltage*1000);	
000012  ed9f8a4c          VLDR     s16,|L15.324|
000016  ed910a00          VLDR     s0,[r1,#0]            ;494
00001a  2813              CMP      r0,#0x13              ;490
00001c  d271              BCS      |L15.258|
00001e  e8dff000          TBB      [pc,r0]               ;490
000022  0a10              DCB      0x0a,0x10
000024  1b26333e          DCB      0x1b,0x26,0x33,0x3e
000028  4f515355          DCB      0x4f,0x51,0x53,0x55
00002c  57596264          DCB      0x57,0x59,0x62,0x64
000030  666c7175          DCB      0x66,0x6c,0x71,0x75
000034  7e00              DCB      0x7e,0x00
000036  4844              LDR      r0,|L15.328|
000038  ed800a00          VSTR     s0,[r0,#0]            ;494
00003c  6b60              LDR      r0,[r4,#0x34]         ;495  ; Run_Control
00003e  b280              UXTH     r0,r0                 ;495
000040  e070              B        |L15.292|
000042  4842              LDR      r0,|L15.332|
000044  ed800a00          VSTR     s0,[r0,#0]            ;498
000048  ee200a08          VMUL.F32 s0,s0,s16
00004c  eebd0ac0          VCVT.S32.F32 s0,s0
000050  ee100a10          VMOV     r0,s0
000054  b280              UXTH     r0,r0
;;;500    			break;
000056  e065              B        |L15.292|
;;;501    
;;;502    		case SLAVE_REG_P02:
;;;503    			value =	(int)(DISS_Current*1000);       /* ½«¼Ä´æÆ÷Öµ¶Á³ö */
000058  483d              LDR      r0,|L15.336|
00005a  ed900a00          VLDR     s0,[r0,#0]
00005e  ee200a08          VMUL.F32 s0,s0,s16
000062  eebd0ac0          VCVT.S32.F32 s0,s0
000066  ee100a10          VMOV     r0,s0
00006a  b280              UXTH     r0,r0
;;;504    			break;
00006c  e05a              B        |L15.292|
;;;505    		case SLAVE_REG_P03: 
;;;506    			value =	(int)(DISS_POW_Voltage*100);
00006e  4839              LDR      r0,|L15.340|
000070  eddf0a39          VLDR     s1,|L15.344|
000074  ed900a00          VLDR     s0,[r0,#0]
000078  ee200a20          VMUL.F32 s0,s0,s1
00007c  eebd0ac0          VCVT.S32.F32 s0,s0
000080  ee100a10          VMOV     r0,s0
000084  b280              UXTH     r0,r0
;;;507    			break;
000086  e04d              B        |L15.292|
;;;508    
;;;509    		case SLAVE_REG_P04:
;;;510    			value =	(int)(DISS_POW_Current*1000);		/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
000088  4834              LDR      r0,|L15.348|
00008a  ed900a00          VLDR     s0,[r0,#0]
00008e  ee200a08          VMUL.F32 s0,s0,s16
000092  eebd0ac0          VCVT.S32.F32 s0,s0
000096  ee100a10          VMOV     r0,s0
00009a  b280              UXTH     r0,r0
;;;511    			break;
00009c  e042              B        |L15.292|
;;;512    		case SLAVE_REG_P05:
;;;513    			IO_OFF();
00009e  f7fffffe          BL       IO_OFF
;;;514                SET_Current_Laod = 0;
0000a2  2000              MOVS     r0,#0
0000a4  6120              STR      r0,[r4,#0x10]  ; Run_Control
;;;515                usartocflag = 1; 
0000a6  482e              LDR      r0,|L15.352|
0000a8  7006              STRB     r6,[r0,#0]
;;;516    //            while(usartocflag == 1);
;;;517                value = (int)(oc_data*1000);
0000aa  482e              LDR      r0,|L15.356|
0000ac  ed900a00          VLDR     s0,[r0,#0]
0000b0  ee200a08          VMUL.F32 s0,s0,s16
0000b4  eebd0ac0          VCVT.S32.F32 s0,s0
0000b8  ee100a10          VMOV     r0,s0
0000bc  b280              UXTH     r0,r0
;;;518    			break;
0000be  e031              B        |L15.292|
;;;519    		case SLAVE_REG_P06:
;;;520    			value = 0;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
0000c0  2000              MOVS     r0,#0
;;;521    			break;
0000c2  e02f              B        |L15.292|
;;;522    		case SLAVE_REG_P07:
;;;523    			value =	0;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
0000c4  2000              MOVS     r0,#0
;;;524    			break;
0000c6  e02d              B        |L15.292|
;;;525    		case SLAVE_REG_P08:
;;;526    			value =	0;	
0000c8  2000              MOVS     r0,#0
;;;527    			break;
0000ca  e02b              B        |L15.292|
;;;528    
;;;529    		case SLAVE_REG_P09:
;;;530    			value =	0;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
0000cc  2000              MOVS     r0,#0
;;;531    			break;
0000ce  e029              B        |L15.292|
;;;532    		case SLAVE_REG_P10:
;;;533    			value =	0;	
0000d0  2000              MOVS     r0,#0
;;;534    			break;
0000d2  e027              B        |L15.292|
;;;535    
;;;536    		case SLAVE_REG_P11:
;;;537    			value =	(int)temp;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
0000d4  4824              LDR      r0,|L15.360|
0000d6  ed900a03          VLDR     s0,[r0,#0xc]
0000da  eebd0ac0          VCVT.S32.F32 s0,s0
0000de  ee100a10          VMOV     r0,s0
0000e2  b280              UXTH     r0,r0
;;;538    			break;
0000e4  e01e              B        |L15.292|
;;;539    		case SLAVE_REG_P12:
;;;540    			value =	0;	
0000e6  2000              MOVS     r0,#0
;;;541    			break;
0000e8  e01c              B        |L15.292|
;;;542    
;;;543    		case SLAVE_REG_P13:
;;;544    			value =	0;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
0000ea  2000              MOVS     r0,#0
;;;545    			break;
0000ec  e01a              B        |L15.292|
;;;546    		case SLAVE_REG_P14:
;;;547    			value =	!flag_Load_CC;	
0000ee  481f              LDR      r0,|L15.364|
0000f0  7800              LDRB     r0,[r0,#0]  ; flagD
0000f2  f34010c0          SBFX     r0,r0,#7,#1
0000f6  1c40              ADDS     r0,r0,#1
;;;548    			break;
0000f8  e014              B        |L15.292|
;;;549    
;;;550    		case SLAVE_REG_P15:
;;;551    			value =	load_v;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
0000fa  f8d400a4          LDR      r0,[r4,#0xa4]  ; Run_Control
0000fe  b280              UXTH     r0,r0
;;;552    			break;
000100  e010              B        |L15.292|
                  |L15.258|
000102  e016              B        |L15.306|
;;;553    		case SLAVE_REG_P16:
;;;554    			value =	load_c;	
000104  f8d40094          LDR      r0,[r4,#0x94]  ; Run_Control
000108  b280              UXTH     r0,r0
;;;555    			break;
00010a  e00b              B        |L15.292|
;;;556    
;;;557    		case SLAVE_REG_P17:
;;;558    			value =	pow_v*10;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
00010c  f8d40098          LDR      r0,[r4,#0x98]  ; Run_Control
000110  f64f71ff          MOV      r1,#0xffff
000114  eb000080          ADD      r0,r0,r0,LSL #2
000118  ea010040          AND      r0,r1,r0,LSL #1
;;;559    			break;
00011c  e002              B        |L15.292|
;;;560    		case SLAVE_REG_P18:
;;;561    			value =	pow_c;							/* ½«¼Ä´æÆ÷Öµ¶Á³ö */
00011e  f8d400a0          LDR      r0,[r4,#0xa0]  ; Run_Control
000122  b280              UXTH     r0,r0
                  |L15.292|
;;;562    			break;	
;;;563    		default:
;;;564    			return 0;
;;;565        }
;;;566    	reg_value[0] = value >> 8;
000124  0a01              LSRS     r1,r0,#8
000126  7029              STRB     r1,[r5,#0]
;;;567    	reg_value[1] = value;
000128  7068              STRB     r0,[r5,#1]
;;;568    
;;;569    	return 1;											/* ¶ÁÈ¡³É¹¦ */
00012a  2001              MOVS     r0,#1
                  |L15.300|
;;;570    }
00012c  ecbd8b02          VPOP     {d8}
000130  bd70              POP      {r4-r6,pc}
                  |L15.306|
000132  2000              MOVS     r0,#0                 ;564
000134  e7fa              B        |L15.300|
;;;571    
                          ENDP

000136  0000              DCW      0x0000
                  |L15.312|
                          DCD      lock
                  |L15.316|
                          DCD      DISS_Voltage
                  |L15.320|
                          DCD      Run_Control
                  |L15.324|
000144  447a0000          DCFS     0x447a0000 ; 1000
                  |L15.328|
                          DCD      v
                  |L15.332|
                          DCD      shortv
                  |L15.336|
                          DCD      DISS_Current
                  |L15.340|
                          DCD      DISS_POW_Voltage
                  |L15.344|
000158  42c80000          DCFS     0x42c80000 ; 100
                  |L15.348|
                          DCD      DISS_POW_Current
                  |L15.352|
                          DCD      usartocflag
                  |L15.356|
                          DCD      oc_data
                  |L15.360|
                          DCD      ||.data||
                  |L15.364|
                          DCD      flagD

                          AREA ||i.MODS_SendAckErr||, CODE, READONLY, ALIGN=2

                  MODS_SendAckErr PROC
;;;230    */
;;;231    static void MODS_SendAckErr(uint8_t _ucErrCode)
000000  b508              PUSH     {r3,lr}
;;;232    {
;;;233    	uint8_t txbuf[3];
;;;234    
;;;235    	txbuf[0] = g_tModS.RxBuf[0];					/* 485µØÖ· */
000002  4908              LDR      r1,|L16.36|
000004  780a              LDRB     r2,[r1,#0]  ; g_tModS
000006  f88d2000          STRB     r2,[sp,#0]
;;;236    	txbuf[1] = g_tModS.RxBuf[1] | 0x80;				/* Òì³£µÄ¹¦ÄÜÂë */
00000a  7849              LDRB     r1,[r1,#1]  ; g_tModS
00000c  f0410180          ORR      r1,r1,#0x80
000010  f88d1001          STRB     r1,[sp,#1]
;;;237    	txbuf[2] = _ucErrCode;							/* ´íÎó´úÂë(01,02,03,04) */
000014  f88d0002          STRB     r0,[sp,#2]
;;;238    
;;;239    	MODS_SendWithCRC(txbuf, 3);
000018  2103              MOVS     r1,#3
00001a  4668              MOV      r0,sp
00001c  f7fffffe          BL       MODS_SendWithCRC
;;;240    }
000020  bd08              POP      {r3,pc}
;;;241    
                          ENDP

000022  0000              DCW      0x0000
                  |L16.36|
                          DCD      ||.bss||

                          AREA ||i.MODS_SendAckOk||, CODE, READONLY, ALIGN=2

                  MODS_SendAckOk PROC
;;;250    */
;;;251    static void MODS_SendAckOk(void)
000000  b51c              PUSH     {r2-r4,lr}
;;;252    {
;;;253    	uint8_t txbuf[6];
;;;254    	uint8_t i;
;;;255    
;;;256    	for (i = 0; i < 6; i++)
000002  2000              MOVS     r0,#0
;;;257    	{
;;;258    		txbuf[i] = g_tModS.RxBuf[i];
000004  4906              LDR      r1,|L17.32|
000006  466a              MOV      r2,sp                 ;253
                  |L17.8|
000008  5c0b              LDRB     r3,[r1,r0]
00000a  5413              STRB     r3,[r2,r0]
00000c  1c40              ADDS     r0,r0,#1              ;256
00000e  b2c0              UXTB     r0,r0                 ;256
000010  2806              CMP      r0,#6                 ;256
000012  d3f9              BCC      |L17.8|
;;;259    	}
;;;260    	MODS_SendWithCRC(txbuf, 6);
000014  2106              MOVS     r1,#6
000016  4668              MOV      r0,sp
000018  f7fffffe          BL       MODS_SendWithCRC
;;;261    }
00001c  bd1c              POP      {r2-r4,pc}
;;;262    
                          ENDP

00001e  0000              DCW      0x0000
                  |L17.32|
                          DCD      ||.bss||

                          AREA ||i.MODS_SendWithCRC||, CODE, READONLY, ALIGN=2

                  MODS_SendWithCRC PROC
;;;1037   
;;;1038   void MODS_SendWithCRC(uint8_t *_pBuf, uint8_t _ucLen)
000000  b5f0              PUSH     {r4-r7,lr}
;;;1039   {
000002  b0a1              SUB      sp,sp,#0x84
000004  4605              MOV      r5,r0
000006  460c              MOV      r4,r1
;;;1040   	uint16_t crc;
;;;1041   	uint8_t i;
;;;1042   	uint8_t buf[S_TX_BUF_SIZE];
;;;1043   	memcpy(buf, _pBuf, _ucLen);
000008  4622              MOV      r2,r4
00000a  4629              MOV      r1,r5
00000c  a801              ADD      r0,sp,#4
00000e  f7fffffe          BL       __aeabi_memcpy
;;;1044   	crc = CRC16(_pBuf, _ucLen);
000012  4621              MOV      r1,r4
000014  4628              MOV      r0,r5
000016  f7fffffe          BL       CRC16
;;;1045   	buf[_ucLen++] = crc >> 8;
00001a  0a02              LSRS     r2,r0,#8
00001c  ad01              ADD      r5,sp,#4
00001e  1c61              ADDS     r1,r4,#1
000020  b2c9              UXTB     r1,r1
000022  552a              STRB     r2,[r5,r4]
;;;1046   	buf[_ucLen++] = crc;
000024  1c4a              ADDS     r2,r1,#1
000026  b2d6              UXTB     r6,r2
000028  5468              STRB     r0,[r5,r1]
;;;1047   //Í¨¹ý485·¢Êý¾Ý
;;;1048   //	RS485_SendBuf(buf, _ucLen);
;;;1049   	for(i=0;i<_ucLen+2;i++)
00002a  2400              MOVS     r4,#0
;;;1050   	{
;;;1051   		Usart_SendByte(USART1,buf[i]);
00002c  4f06              LDR      r7,|L18.72|
00002e  1cb6              ADDS     r6,r6,#2              ;1049
000030  e005              B        |L18.62|
                  |L18.50|
000032  5d29              LDRB     r1,[r5,r4]
000034  4638              MOV      r0,r7
000036  f7fffffe          BL       Usart_SendByte
00003a  1c64              ADDS     r4,r4,#1              ;1049
00003c  b2e4              UXTB     r4,r4                 ;1049
                  |L18.62|
00003e  42b4              CMP      r4,r6                 ;1049
000040  d3f7              BCC      |L18.50|
;;;1052   	}
;;;1053   //	uart1SendChars(buf, _ucLen);
;;;1054   	
;;;1055   // #if 1									/* ´Ë²¿·ÖÎªÁË´®¿Ú´òÓ¡½á¹û,Êµ¼ÊÔËÓÃÖÐ¿É²»Òª */
;;;1056   // 	g_tPrint.Txlen = _ucLen;
;;;1057   // 	memcpy(g_tPrint.TxBuf, buf, _ucLen);
;;;1058   // #endif
;;;1059   }
000042  b021              ADD      sp,sp,#0x84
000044  bdf0              POP      {r4-r7,pc}
;;;1060   
                          ENDP

000046  0000              DCW      0x0000
                  |L18.72|
                          DCD      0x40011000

                          AREA ||i.MODS_WriteRegValue||, CODE, READONLY, ALIGN=2

                  MODS_WriteRegValue PROC
;;;580    */
;;;581    static uint8_t MODS_WriteRegValue(uint16_t reg_addr, uint16_t reg_value)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;582    {
;;;583    	lock = 1;
000004  4a47              LDR      r2,|L19.292|
000006  2501              MOVS     r5,#1
000008  7015              STRB     r5,[r2,#0]
;;;584    	switch (reg_addr)							/* ÅÐ¶Ï¼Ä´æÆ÷µØÖ· */
;;;585    	{	
;;;586    		case SLAVE_REG_P00://è´Ÿè½½æ¨¡å¼
;;;587    			if(reg_value == 0)
;;;588    			{
;;;589    				load_mode = 1;
;;;590                    Write_LOAD();
;;;591    				GPIO_SetBits(GPIOC,GPIO_Pin_10);//CC
;;;592    				flag_Load_CC = 1;
;;;593    			}else if(reg_value == 1){
;;;594    				load_mode = 0;
;;;595                    Write_LOAD();
;;;596    				GPIO_ResetBits(GPIOC,GPIO_Pin_10);//CV
;;;597    				flag_Load_CC = 0;
;;;598    			}
;;;599    			break;
;;;600    		case SLAVE_REG_P01://è´Ÿè½½ç”µåŽ‹
;;;601    			load_v = reg_value;
00000a  4a47              LDR      r2,|L19.296|
;;;602    			SET_Voltage_Laod = load_v;
;;;603    			Write_Limits();
;;;604    			break;
;;;605    		
;;;606    		case SLAVE_REG_P02://è´Ÿè½½ç”µæµ
;;;607    			load_c = reg_value;
;;;608    			SET_Current_Laod = load_c;
;;;609    			Write_Limits();
;;;610    			break;
;;;611    		case SLAVE_REG_P03://è¾“å‡ºç”µåŽ‹
;;;612    			pow_v = reg_value;
;;;613    			SET_Voltage = pow_v;
;;;614    			Write_Limits();
;;;615    			break;
;;;616    
;;;617    		case SLAVE_REG_P04://é™åˆ¶ç”µæµ
;;;618    			pow_c = reg_value;
;;;619    			SET_Current = pow_c;
;;;620    			Write_Limits();
;;;621    			break;
;;;622    		case SLAVE_REG_P05://å……æ”¾ç”µè¾“å‡ºç”µåŽ‹
;;;623    			opv1 = reg_value;
;;;624    			SET_Voltage = opv1;
;;;625    			Write_Limits();
;;;626    			break;
;;;627    
;;;628    		case SLAVE_REG_P06://å……æ”¾é™åˆ¶ç”µæµ
;;;629    			opc1 = reg_value;
;;;630    			SET_Current = opc1;
;;;631    			Write_Limits();
;;;632    			break;
;;;633    		case SLAVE_REG_P07://å……ç”µæˆªæ­¢ç”µåŽ‹
;;;634    			cov1 = reg_value;
00000c  4b47              LDR      r3,|L19.300|
;;;635    			Write_Limits();
;;;636    			break;
;;;637    		case SLAVE_REG_P08://å……ç”µæˆªæ­¢ç”µæµ
;;;638    			coc1 = reg_value;
;;;639    			Write_Limits();
;;;640    			break;
;;;641    		case SLAVE_REG_P09:	//å……æ”¾ç”µè´Ÿè½½ç”µæµ
;;;642    			cdc_dc = reg_value;
;;;643    			SET_Current_Laod = cdc_dc;
;;;644    			Write_Limits();
;;;645    			break;
;;;646    		case SLAVE_REG_P10:	//æ”¾ç”µæˆªæ­¢ç”µåŽ‹
;;;647    			set_dc_cutoff_v = reg_value;
;;;648    			Write_Limits();
;;;649    			break;
;;;650    
;;;651    		case SLAVE_REG_P11://å¾ªçŽ¯æ¬¡æ•°
;;;652    			set_loop_count = reg_value;
;;;653    			Write_Limits();
;;;654    			break;
;;;655    		case SLAVE_REG_P12:
;;;656    			set_load_cutoffv = reg_value;
00000e  4c48              LDR      r4,|L19.304|
;;;657    			Flash_Write32BitDatas(FLASH_USER_START_ADDR,40, InFlashSave);
000010  4e48              LDR      r6,|L19.308|
000012  2812              CMP      r0,#0x12              ;584
000014  d273              BCS      |L19.254|
000016  e8dff000          TBB      [pc,r0]               ;584
00001a  092b              DCB      0x09,0x2b
00001c  333b434b          DCB      0x33,0x3b,0x43,0x4b
000020  51595d61          DCB      0x51,0x59,0x5d,0x61
000024  696d737a          DCB      0x69,0x6d,0x73,0x7a
000028  80808080          DCB      0x80,0x80,0x80,0x80
00002c  4a42              LDR      r2,|L19.312|
00002e  4f43              LDR      r7,|L19.316|
000030  4c43              LDR      r4,|L19.320|
000032  f44f6680          MOV      r6,#0x400             ;591
000036  b111              CBZ      r1,|L19.62|
000038  2901              CMP      r1,#1                 ;593
00003a  d00c              BEQ      |L19.86|
00003c  e06d              B        |L19.282|
                  |L19.62|
00003e  7015              STRB     r5,[r2,#0]            ;589
000040  f7fffffe          BL       Write_LOAD
000044  4631              MOV      r1,r6                 ;591
000046  4638              MOV      r0,r7                 ;591
000048  f7fffffe          BL       GPIO_SetBits
00004c  6820              LDR      r0,[r4,#0]            ;592  ; flagD
00004e  f0400080          ORR      r0,r0,#0x80           ;592
000052  6020              STR      r0,[r4,#0]            ;592  ; flagD
000054  e061              B        |L19.282|
                  |L19.86|
000056  2000              MOVS     r0,#0                 ;594
000058  7010              STRB     r0,[r2,#0]            ;594
00005a  f7fffffe          BL       Write_LOAD
00005e  4631              MOV      r1,r6                 ;596
000060  4638              MOV      r0,r7                 ;596
000062  f7fffffe          BL       GPIO_ResetBits
000066  6820              LDR      r0,[r4,#0]            ;597  ; flagD
000068  f0200080          BIC      r0,r0,#0x80           ;597
00006c  6020              STR      r0,[r4,#0]            ;597  ; flagD
00006e  e054              B        |L19.282|
000070  f8c210a4          STR      r1,[r2,#0xa4]         ;601  ; Run_Control
000074  f8d200a4          LDR      r0,[r2,#0xa4]         ;602  ; Run_Control
000078  60d0              STR      r0,[r2,#0xc]          ;602  ; Run_Control
00007a  f7fffffe          BL       Write_Limits
00007e  e04c              B        |L19.282|
000080  f8c21094          STR      r1,[r2,#0x94]         ;607  ; Run_Control
000084  f8d20094          LDR      r0,[r2,#0x94]         ;608  ; Run_Control
000088  6110              STR      r0,[r2,#0x10]         ;608  ; Run_Control
00008a  f7fffffe          BL       Write_Limits
00008e  e044              B        |L19.282|
000090  f8c21098          STR      r1,[r2,#0x98]         ;612  ; Run_Control
000094  f8d20098          LDR      r0,[r2,#0x98]         ;613  ; Run_Control
000098  6050              STR      r0,[r2,#4]            ;613  ; Run_Control
00009a  f7fffffe          BL       Write_Limits
00009e  e03c              B        |L19.282|
0000a0  f8c210a0          STR      r1,[r2,#0xa0]         ;618  ; Run_Control
0000a4  f8d200a0          LDR      r0,[r2,#0xa0]         ;619  ; Run_Control
0000a8  6090              STR      r0,[r2,#8]            ;619  ; Run_Control
0000aa  f7fffffe          BL       Write_Limits
0000ae  e034              B        |L19.282|
0000b0  67d1              STR      r1,[r2,#0x7c]         ;623  ; Run_Control
0000b2  6fd0              LDR      r0,[r2,#0x7c]         ;624  ; Run_Control
0000b4  6050              STR      r0,[r2,#4]            ;624  ; Run_Control
0000b6  f7fffffe          BL       Write_Limits
0000ba  e02e              B        |L19.282|
0000bc  f8c21088          STR      r1,[r2,#0x88]         ;629  ; Run_Control
0000c0  f8d20088          LDR      r0,[r2,#0x88]         ;630  ; Run_Control
0000c4  6090              STR      r0,[r2,#8]            ;630  ; Run_Control
0000c6  f7fffffe          BL       Write_Limits
0000ca  e026              B        |L19.282|
0000cc  8019              STRH     r1,[r3,#0]            ;634
0000ce  f7fffffe          BL       Write_Limits
0000d2  e022              B        |L19.282|
0000d4  80d9              STRH     r1,[r3,#6]            ;638
0000d6  f7fffffe          BL       Write_Limits
0000da  e01e              B        |L19.282|
0000dc  f8c2109c          STR      r1,[r2,#0x9c]         ;642  ; Run_Control
0000e0  f8d2009c          LDR      r0,[r2,#0x9c]         ;643  ; Run_Control
0000e4  6110              STR      r0,[r2,#0x10]         ;643  ; Run_Control
0000e6  f7fffffe          BL       Write_Limits
0000ea  e016              B        |L19.282|
0000ec  66d1              STR      r1,[r2,#0x6c]         ;647  ; Run_Control
0000ee  f7fffffe          BL       Write_Limits
0000f2  e012              B        |L19.282|
0000f4  4813              LDR      r0,|L19.324|
0000f6  7001              STRB     r1,[r0,#0]            ;652
0000f8  f7fffffe          BL       Write_Limits
0000fc  e00d              B        |L19.282|
                  |L19.254|
0000fe  e00f              B        |L19.288|
000100  6121              STR      r1,[r4,#0x10]         ;656  ; InFlashSave
000102  4a0b              LDR      r2,|L19.304|
000104  2128              MOVS     r1,#0x28
000106  4630              MOV      r0,r6
000108  f7fffffe          BL       Flash_Write32BitDatas
;;;658    			break;
00010c  e005              B        |L19.282|
;;;659    
;;;660    		case SLAVE_REG_P13:
;;;661    			set_pow_cutoffc = reg_value;
00010e  6161              STR      r1,[r4,#0x14]  ; InFlashSave
;;;662    			Flash_Write32BitDatas(FLASH_USER_START_ADDR,40, InFlashSave);
000110  4a07              LDR      r2,|L19.304|
000112  2128              MOVS     r1,#0x28
000114  4630              MOV      r0,r6
000116  f7fffffe          BL       Flash_Write32BitDatas
                  |L19.282|
;;;663    			break;
;;;664    		case SLAVE_REG_P14:
;;;665    			break;
;;;666    
;;;667    		case SLAVE_REG_P15:
;;;668    			break;
;;;669    		case SLAVE_REG_P16:
;;;670    			break;
;;;671    
;;;672    		case SLAVE_REG_P17:
;;;673    			break;
;;;674    		default:
;;;675    			return 0;
;;;676    	}
;;;677    
;;;678    	return 1;
00011a  2001              MOVS     r0,#1
                  |L19.284|
;;;679    }
00011c  e8bd81f0          POP      {r4-r8,pc}
                  |L19.288|
000120  2000              MOVS     r0,#0                 ;675
000122  e7fb              B        |L19.284|
;;;680    
                          ENDP

                  |L19.292|
                          DCD      lock
                  |L19.296|
                          DCD      Run_Control
                  |L19.300|
                          DCD      coff
                  |L19.304|
                          DCD      InFlashSave
                  |L19.308|
                          DCD      0x080e0000
                  |L19.312|
                          DCD      load_mode
                  |L19.316|
                          DCD      0x40020800
                  |L19.320|
                          DCD      flagD
                  |L19.324|
                          DCD      set_loop_count

                          AREA ||i.MemManage_Handler||, CODE, READONLY, ALIGN=1

                  MemManage_Handler PROC
                  |L20.0|
;;;127      */
;;;128    void MemManage_Handler(void)
000000  e7fe              B        |L20.0|
;;;129    {
;;;130      /* Go to infinite loop when Memory Manage exception occurs */
;;;131      while (1)
;;;132      {
;;;133      }
;;;134    }
;;;135    
                          ENDP


                          AREA ||i.NMI_Handler||, CODE, READONLY, ALIGN=1

                  NMI_Handler PROC
;;;105      */
;;;106    void NMI_Handler(void)
000000  4770              BX       lr
;;;107    {
;;;108    }
;;;109    
                          ENDP


                          AREA ||i.PendSV_Handler||, CODE, READONLY, ALIGN=1

                  PendSV_Handler PROC
;;;184      */
;;;185    void PendSV_Handler(void)
000000  4770              BX       lr
;;;186    {
;;;187    }
;;;188    
                          ENDP


                          AREA ||i.RecHandle||, CODE, READONLY, ALIGN=2

                  RecHandle PROC
;;;440    
;;;441    void RecHandle(void)
000000  480b              LDR      r0,|L23.48|
;;;442    {
;;;443        u8 crec[6];
;;;444        u8 *csend;
;;;445        static u8 *sendbuf;
;;;446        u8 sendlen;
;;;447        static u16 recrc;
;;;448        static u16 scrc;
;;;449        u8 i;
;;;450        
;;;451        switch(g_tModS.RxBuf[1])
000002  7840              LDRB     r0,[r0,#1]  ; g_tModS
000004  2850              CMP      r0,#0x50
000006  d00e              BEQ      |L23.38|
000008  dc05              BGT      |L23.22|
00000a  2803              CMP      r0,#3
00000c  d009              BEQ      |L23.34|
00000e  2806              CMP      r0,#6
000010  d10d              BNE      |L23.46|
;;;452        {
;;;453            case 0x03:
;;;454            {
;;;455                MODS_03H();
;;;456            }break;
;;;457            case 0x06:
;;;458            {
;;;459                MODS_06H();
000012  f7ffbffe          B.W      MODS_06H
                  |L23.22|
000016  2851              CMP      r0,#0x51              ;451
000018  d007              BEQ      |L23.42|
00001a  2852              CMP      r0,#0x52              ;451
00001c  d107              BNE      |L23.46|
;;;460            }break;
;;;461    		case 0x50:
;;;462            {
;;;463                MODS_50H();
;;;464            }break;
;;;465    		case 0x51:
;;;466            {
;;;467                MODS_51H();
;;;468            }break;
;;;469    		case 0x52:
;;;470            {
;;;471                MODS_52H();
00001e  f7ffbffe          B.W      MODS_52H
                  |L23.34|
000022  f7ffbffe          B.W      MODS_03H
                  |L23.38|
000026  f7ffbffe          B.W      MODS_50H
                  |L23.42|
00002a  f7ffbffe          B.W      MODS_51H
                  |L23.46|
;;;472            }break;
;;;473            default:break;
;;;474        }
;;;475    }
00002e  4770              BX       lr
;;;476    
                          ENDP

                  |L23.48|
                          DCD      ||.bss||

                          AREA ||i.SVC_Handler||, CODE, READONLY, ALIGN=1

                  SVC_Handler PROC
;;;166      */
;;;167    void SVC_Handler(void)
000000  4770              BX       lr
;;;168    {
;;;169    }
;;;170    
                          ENDP


                          AREA ||i.SysTick_Handler||, CODE, READONLY, ALIGN=2

                  SysTick_Handler PROC
;;;193      */
;;;194    void SysTick_Handler(void)
000000  b510              PUSH     {r4,lr}
;;;195    {
;;;196    	TimingDelay_Decrement();
000002  f7fffffe          BL       TimingDelay_Decrement
;;;197    	OS_TimeMS++;
000006  4918              LDR      r1,|L25.104|
000008  6808              LDR      r0,[r1,#0]  ; OS_TimeMS
00000a  1c40              ADDS     r0,r0,#1
00000c  6008              STR      r0,[r1,#0]  ; OS_TimeMS
;;;198    	t_KeyScan++;
00000e  4817              LDR      r0,|L25.108|
000010  7801              LDRB     r1,[r0,#0]  ; t_KeyScan
000012  1c49              ADDS     r1,r1,#1
000014  7001              STRB     r1,[r0,#0]
;;;199    	if(t_KeyScan>10)
000016  7803              LDRB     r3,[r0,#0]  ; t_KeyScan
;;;200    	{
;;;201    		t_KeyScan=0;
;;;202    		Flag_Key_Scan=1;//§Õ?§Ý???
000018  4a15              LDR      r2,|L25.112|
00001a  2100              MOVS     r1,#0
00001c  2b0a              CMP      r3,#0xa               ;199
00001e  d904              BLS      |L25.42|
000020  7001              STRB     r1,[r0,#0]            ;201
000022  6810              LDR      r0,[r2,#0]  ; flagA
000024  f0400008          ORR      r0,r0,#8
000028  6010              STR      r0,[r2,#0]  ; flagA
                  |L25.42|
;;;203    	}
;;;204    	t_0_5S++;
00002a  4812              LDR      r0,|L25.116|
00002c  8803              LDRH     r3,[r0,#0]  ; t_0_5S
00002e  1c5b              ADDS     r3,r3,#1
000030  8003              STRH     r3,[r0,#0]
;;;205    	if(t_0_5S>20)
000032  8803              LDRH     r3,[r0,#0]  ; t_0_5S
000034  2b14              CMP      r3,#0x14
000036  d904              BLS      |L25.66|
;;;206    	{
;;;207    		t_0_5S=0;
000038  8001              STRH     r1,[r0,#0]
;;;208    		Flag_0_5S =1;//???§¾????
00003a  6810              LDR      r0,[r2,#0]  ; flagA
00003c  f0400080          ORR      r0,r0,#0x80
000040  6010              STR      r0,[r2,#0]  ; flagA
                  |L25.66|
;;;209    	}
;;;210    //--------------------------------------------
;;;211    	if(flag_Tim_USART==1)//???¡ê??
000042  4b0d              LDR      r3,|L25.120|
;;;212    	{
;;;213    		t_USART++;
000044  4a0d              LDR      r2,|L25.124|
000046  6818              LDR      r0,[r3,#0]            ;211  ; flagD
000048  07c4              LSLS     r4,r0,#31             ;211
00004a  d002              BEQ      |L25.82|
00004c  7814              LDRB     r4,[r2,#0]  ; t_USART
00004e  1c64              ADDS     r4,r4,#1
000050  7014              STRB     r4,[r2,#0]
                  |L25.82|
;;;214    	}
;;;215    	if(t_USART>40)//??2.6ms
000052  7814              LDRB     r4,[r2,#0]  ; t_USART
000054  2c28              CMP      r4,#0x28
000056  d905              BLS      |L25.100|
;;;216    	{
;;;217    		t_USART=0;
000058  7011              STRB     r1,[r2,#0]
;;;218    		flag_Tim_USART=0;
00005a  f0200001          BIC      r0,r0,#1
00005e  6018              STR      r0,[r3,#0]  ; flagD
;;;219    		UART_Buffer_Size=0;	
000060  4807              LDR      r0,|L25.128|
000062  7001              STRB     r1,[r0,#0]
                  |L25.100|
;;;220    	}
;;;221    }
000064  bd10              POP      {r4,pc}
;;;222    
                          ENDP

000066  0000              DCW      0x0000
                  |L25.104|
                          DCD      OS_TimeMS
                  |L25.108|
                          DCD      t_KeyScan
                  |L25.112|
                          DCD      flagA
                  |L25.116|
                          DCD      t_0_5S
                  |L25.120|
                          DCD      flagD
                  |L25.124|
                          DCD      t_USART
                  |L25.128|
                          DCD      UART_Buffer_Size

                          AREA ||i.TIM6_DAC_IRQHandler||, CODE, READONLY, ALIGN=2

                  TIM6_DAC_IRQHandler PROC
;;;366    
;;;367    void  TIM6_DAC_IRQHandler (void)
000000  2101              MOVS     r1,#1
;;;368    {
;;;369    	TIM_ClearITPendingBit(TIM6,TIM_IT_Update);//?????¦Ë
000002  4801              LDR      r0,|L26.8|
000004  f7ffbffe          B.W      TIM_ClearITPendingBit
;;;370    }
;;;371    
                          ENDP

                  |L26.8|
                          DCD      0x40001000

                          AREA ||i.USART1_IRQHandler||, CODE, READONLY, ALIGN=2

                  USART1_IRQHandler PROC
;;;371    
;;;372    void USART1_IRQHandler(void)
000000  b570              PUSH     {r4-r6,lr}
;;;373    {
;;;374    //	flag_Tim_USART=1;
;;;375        
;;;376     	if(USART_GetITStatus(USART1, USART_IT_RXNE) != RESET)
000002  4d12              LDR      r5,|L27.76|
000004  f2405125          MOV      r1,#0x525
000008  4628              MOV      r0,r5
00000a  f7fffffe          BL       USART_GetITStatus
00000e  2800              CMP      r0,#0
000010  d01b              BEQ      |L27.74|
;;;377    	{
;;;378    		
;;;379            g_mods_timeout = 2;
000012  480f              LDR      r0,|L27.80|
000014  2102              MOVS     r1,#2
000016  7001              STRB     r1,[r0,#0]
;;;380            if (g_tModS.RxCount < S_RX_BUF_SIZE)
000018  4c0e              LDR      r4,|L27.84|
00001a  f894009e          LDRB     r0,[r4,#0x9e]  ; g_tModS
00001e  281e              CMP      r0,#0x1e
000020  d208              BCS      |L27.52|
;;;381            {
;;;382                g_tModS.RxBuf[g_tModS.RxCount++] = USART_ReceiveData(USART1);
000022  4628              MOV      r0,r5
000024  f7fffffe          BL       USART_ReceiveData
000028  f894109e          LDRB     r1,[r4,#0x9e]  ; g_tModS
00002c  1c4a              ADDS     r2,r1,#1
00002e  f884209e          STRB     r2,[r4,#0x9e]
000032  5460              STRB     r0,[r4,r1]
                  |L27.52|
;;;383            }
;;;384    		if(g_tModS.RxCount > 7 && g_tModS.RxBuf[1] == 6)
000034  f894009e          LDRB     r0,[r4,#0x9e]  ; g_tModS
000038  2807              CMP      r0,#7
00003a  d906              BLS      |L27.74|
00003c  7860              LDRB     r0,[r4,#1]  ; g_tModS
00003e  2806              CMP      r0,#6
000040  d103              BNE      |L27.74|
;;;385    		{
;;;386    			MODS_SendAckOk();
000042  e8bd4070          POP      {r4-r6,lr}
000046  f7ffbffe          B.W      MODS_SendAckOk
                  |L27.74|
;;;387    		}
;;;388    	}
;;;389    }
00004a  bd70              POP      {r4-r6,pc}
;;;390    
                          ENDP

                  |L27.76|
                          DCD      0x40011000
                  |L27.80|
                          DCD      ||.data||
                  |L27.84|
                          DCD      ||.bss||

                          AREA ||i.USART3_IRQHandler||, CODE, READONLY, ALIGN=2

                  USART3_IRQHandler PROC
;;;391    
;;;392    void USART3_IRQHandler(void)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;393    {
000004  ed2d8b02          VPUSH    {d8}
;;;394        static vu8 count = 0;
;;;395        u8 res; 
;;;396        static vu8 i = 0;
;;;397        static float sum;
;;;398        if(USART_GetITStatus(USART3, USART_IT_RXNE) != RESET)
000008  f2405725          MOV      r7,#0x525
00000c  4e35              LDR      r6,|L28.228|
00000e  4639              MOV      r1,r7
000010  4630              MOV      r0,r6
000012  f7fffffe          BL       USART_GetITStatus
000016  2800              CMP      r0,#0
000018  d05f              BEQ      |L28.218|
;;;399        {
;;;400            
;;;401            res =USART_ReceiveData(USART3);//(USART1->DR); //????????
00001a  4630              MOV      r0,r6
00001c  f7fffffe          BL       USART_ReceiveData
000020  b2c0              UXTB     r0,r0
;;;402            if(count == 0)
000022  4c31              LDR      r4,|L28.232|
000024  7861              LDRB     r1,[r4,#1]  ; count
000026  2500              MOVS     r5,#0
000028  b179              CBZ      r1,|L28.74|
;;;403            {
;;;404                if(res == 0x03)
;;;405                {
;;;406                    count = 1;
;;;407                }else{
;;;408                    count = 0;
;;;409                }
;;;410            }else if(count == 1){
00002a  7861              LDRB     r1,[r4,#1]  ; count
00002c  2901              CMP      r1,#1
00002e  d013              BEQ      |L28.88|
;;;411                 if(res == 0xff)
;;;412                {
;;;413                    count = 2;
;;;414                }else{
;;;415                    count = 0;
;;;416                }
;;;417                
;;;418            }else if(count > 1 && count <4)
000030  7862              LDRB     r2,[r4,#1]  ; count
;;;419            {
;;;420                UART_Buffer_Rece[count] = res;               
000032  492e              LDR      r1,|L28.236|
000034  2a01              CMP      r2,#1                 ;418
000036  d916              BLS      |L28.102|
000038  7862              LDRB     r2,[r4,#1]            ;418  ; count
00003a  2a04              CMP      r2,#4                 ;418
00003c  d213              BCS      |L28.102|
00003e  7862              LDRB     r2,[r4,#1]  ; count
000040  5488              STRB     r0,[r1,r2]
;;;421    //            temp = (UART_Buffer_Rece[2] * 256 + UART_Buffer_Rece[3])/10.0;
;;;422                count ++;
000042  7860              LDRB     r0,[r4,#1]  ; count
000044  1c40              ADDS     r0,r0,#1
000046  7060              STRB     r0,[r4,#1]
000048  e03f              B        |L28.202|
                  |L28.74|
00004a  2803              CMP      r0,#3                 ;404
00004c  d001              BEQ      |L28.82|
00004e  7065              STRB     r5,[r4,#1]            ;408
000050  e03b              B        |L28.202|
                  |L28.82|
000052  2001              MOVS     r0,#1                 ;406
000054  7060              STRB     r0,[r4,#1]            ;406
000056  e038              B        |L28.202|
                  |L28.88|
000058  28ff              CMP      r0,#0xff              ;411
00005a  d001              BEQ      |L28.96|
00005c  7065              STRB     r5,[r4,#1]            ;415
00005e  e034              B        |L28.202|
                  |L28.96|
000060  2002              MOVS     r0,#2                 ;413
000062  7060              STRB     r0,[r4,#1]            ;413
000064  e031              B        |L28.202|
                  |L28.102|
;;;423            }else if(count == 4)
000066  7860              LDRB     r0,[r4,#1]  ; count
000068  2804              CMP      r0,#4
00006a  d12e              BNE      |L28.202|
;;;424            {
;;;425                if(i < 10)
00006c  78a0              LDRB     r0,[r4,#2]  ; i
;;;426                {
;;;427                 sum += (UART_Buffer_Rece[2] * 256 + UART_Buffer_Rece[3])/10.0;
00006e  ed9f8b20          VLDR     d8,|L28.240|
000072  280a              CMP      r0,#0xa               ;425
000074  d216              BCS      |L28.164|
000076  78c8              LDRB     r0,[r1,#3]  ; UART_Buffer_Rece
000078  7889              LDRB     r1,[r1,#2]  ; UART_Buffer_Rece
00007a  eb002001          ADD      r0,r0,r1,LSL #8
00007e  f7fffffe          BL       __aeabi_ui2d
000082  ec532b18          VMOV     r2,r3,d8
000086  f7fffffe          BL       __aeabi_ddiv
00008a  ec410b18          VMOV     d8,r0,r1
00008e  68a0              LDR      r0,[r4,#8]  ; sum
000090  f7fffffe          BL       __aeabi_f2d
000094  ec532b18          VMOV     r2,r3,d8
000098  f7fffffe          BL       __aeabi_dadd
00009c  f7fffffe          BL       __aeabi_d2f
0000a0  60a0              STR      r0,[r4,#8]  ; sum
0000a2  e00e              B        |L28.194|
                  |L28.164|
;;;428                }else{
;;;429                    temp = sum/10.0;
0000a4  68a0              LDR      r0,[r4,#8]  ; sum
0000a6  f7fffffe          BL       __aeabi_f2d
0000aa  ec532b18          VMOV     r2,r3,d8
0000ae  f7fffffe          BL       __aeabi_ddiv
0000b2  f7fffffe          BL       __aeabi_d2f
0000b6  60e0              STR      r0,[r4,#0xc]  ; temp
;;;430                    sum = 0;
0000b8  ed9f0a0f          VLDR     s0,|L28.248|
0000bc  ed840a02          VSTR     s0,[r4,#8]
;;;431                    i = 0;
0000c0  70a5              STRB     r5,[r4,#2]
                  |L28.194|
;;;432                }
;;;433                 count =0;
0000c2  7065              STRB     r5,[r4,#1]
;;;434                 i ++;
0000c4  78a0              LDRB     r0,[r4,#2]  ; i
0000c6  1c40              ADDS     r0,r0,#1
0000c8  70a0              STRB     r0,[r4,#2]
                  |L28.202|
;;;435            }
;;;436            USART_ClearITPendingBit(USART3, USART_IT_RXNE);
0000ca  4639              MOV      r1,r7
0000cc  ecbd8b02          VPOP     {d8}
0000d0  4630              MOV      r0,r6
0000d2  e8bd41f0          POP      {r4-r8,lr}
0000d6  f7ffbffe          B.W      USART_ClearITPendingBit
                  |L28.218|
;;;437         }
;;;438    }
0000da  ecbd8b02          VPOP     {d8}
0000de  e8bd81f0          POP      {r4-r8,pc}
;;;439    
                          ENDP

0000e2  0000              DCW      0x0000
                  |L28.228|
                          DCD      0x40004800
                  |L28.232|
                          DCD      ||.data||
                  |L28.236|
                          DCD      UART_Buffer_Rece
                  |L28.240|
0000f0  00000000          DCFD     0x4024000000000000 ; 10
0000f4  40240000
                  |L28.248|
0000f8  00000000          DCFS     0x00000000 ; 0

                          AREA ||i.UsageFault_Handler||, CODE, READONLY, ALIGN=1

                  UsageFault_Handler PROC
                  |L29.0|
;;;153      */
;;;154    void UsageFault_Handler(void)
000000  e7fe              B        |L29.0|
;;;155    {
;;;156      /* Go to infinite loop when Usage Fault exception occurs */
;;;157      while (1)
;;;158      {
;;;159      }
;;;160    }
;;;161    
                          ENDP


                          AREA ||i.Usart_SendByte||, CODE, READONLY, ALIGN=1

                  Usart_SendByte PROC
;;;278    /*****************  ·¢ËÍÒ»¸ö×Ö·û **********************/
;;;279    void Usart_SendByte( USART_TypeDef * pUSARTx, uint8_t ch)
000000  b510              PUSH     {r4,lr}
;;;280    {
000002  4604              MOV      r4,r0
;;;281    	/* ·¢ËÍÒ»¸ö×Ö½ÚÊý¾Ýµ½USART */
;;;282    	USART_SendData(pUSARTx,ch);
000004  4620              MOV      r0,r4
000006  f7fffffe          BL       USART_SendData
                  |L30.10|
;;;283    		
;;;284    	/* µÈ´ý·¢ËÍÊý¾Ý¼Ä´æÆ÷Îª¿Õ */
;;;285    	while (USART_GetFlagStatus(pUSARTx, USART_FLAG_TXE) == RESET);	
00000a  2180              MOVS     r1,#0x80
00000c  4620              MOV      r0,r4
00000e  f7fffffe          BL       USART_GetFlagStatus
000012  2800              CMP      r0,#0
000014  d0f9              BEQ      |L30.10|
;;;286    }
000016  bd10              POP      {r4,pc}
;;;287    
                          ENDP


                          AREA ||i.uart1SendChars||, CODE, READONLY, ALIGN=2

                  uart1SendChars PROC
;;;287    
;;;288    void uart1SendChars(u8 *str, u16 strlen)
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;289    { 
000004  4605              MOV      r5,r0
000006  460e              MOV      r6,r1
;;;290    	  u16 k= 0 ; 
000008  2400              MOVS     r4,#0
;;;291       do { 
;;;292           USART_SendData(USART1,*(str + k));
00000a  4f08              LDR      r7,|L31.44|
                  |L31.12|
00000c  5d29              LDRB     r1,[r5,r4]
00000e  4638              MOV      r0,r7
000010  f7fffffe          BL       USART_SendData
                  |L31.20|
;;;293           while (USART_GetFlagStatus(USART1,USART_FLAG_TXE) == RESET);
000014  2180              MOVS     r1,#0x80
000016  4638              MOV      r0,r7
000018  f7fffffe          BL       USART_GetFlagStatus
00001c  2800              CMP      r0,#0
00001e  d0f9              BEQ      |L31.20|
;;;294           k++; 
000020  1c64              ADDS     r4,r4,#1
000022  b2a4              UXTH     r4,r4
;;;295           }   //Ñ­»··¢ËÍ,Ö±µ½·¢ËÍÍê±Ï   
;;;296        while (k < strlen); 
000024  42b4              CMP      r4,r6
000026  d3f1              BCC      |L31.12|
;;;297    } 
000028  e8bd81f0          POP      {r4-r8,pc}
;;;298    
                          ENDP

                  |L31.44|
                          DCD      0x40011000

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  g_tModS
                          %        163

                          AREA ||.constdata||, DATA, READONLY, ALIGN=0

                  s_CRCHi
000000  00c18140          DCB      0x00,0xc1,0x81,0x40
000004  01c08041          DCB      0x01,0xc0,0x80,0x41
000008  01c08041          DCB      0x01,0xc0,0x80,0x41
00000c  00c18140          DCB      0x00,0xc1,0x81,0x40
000010  01c08041          DCB      0x01,0xc0,0x80,0x41
000014  00c18140          DCB      0x00,0xc1,0x81,0x40
000018  00c18140          DCB      0x00,0xc1,0x81,0x40
00001c  01c08041          DCB      0x01,0xc0,0x80,0x41
000020  01c08041          DCB      0x01,0xc0,0x80,0x41
000024  00c18140          DCB      0x00,0xc1,0x81,0x40
000028  00c18140          DCB      0x00,0xc1,0x81,0x40
00002c  01c08041          DCB      0x01,0xc0,0x80,0x41
000030  00c18140          DCB      0x00,0xc1,0x81,0x40
000034  01c08041          DCB      0x01,0xc0,0x80,0x41
000038  01c08041          DCB      0x01,0xc0,0x80,0x41
00003c  00c18140          DCB      0x00,0xc1,0x81,0x40
000040  01c08041          DCB      0x01,0xc0,0x80,0x41
000044  00c18140          DCB      0x00,0xc1,0x81,0x40
000048  00c18140          DCB      0x00,0xc1,0x81,0x40
00004c  01c08041          DCB      0x01,0xc0,0x80,0x41
000050  00c18140          DCB      0x00,0xc1,0x81,0x40
000054  01c08041          DCB      0x01,0xc0,0x80,0x41
000058  01c08041          DCB      0x01,0xc0,0x80,0x41
00005c  00c18140          DCB      0x00,0xc1,0x81,0x40
000060  00c18140          DCB      0x00,0xc1,0x81,0x40
000064  01c08041          DCB      0x01,0xc0,0x80,0x41
000068  01c08041          DCB      0x01,0xc0,0x80,0x41
00006c  00c18140          DCB      0x00,0xc1,0x81,0x40
000070  01c08041          DCB      0x01,0xc0,0x80,0x41
000074  00c18140          DCB      0x00,0xc1,0x81,0x40
000078  00c18140          DCB      0x00,0xc1,0x81,0x40
00007c  01c08041          DCB      0x01,0xc0,0x80,0x41
000080  01c08041          DCB      0x01,0xc0,0x80,0x41
000084  00c18140          DCB      0x00,0xc1,0x81,0x40
000088  00c18140          DCB      0x00,0xc1,0x81,0x40
00008c  01c08041          DCB      0x01,0xc0,0x80,0x41
000090  00c18140          DCB      0x00,0xc1,0x81,0x40
000094  01c08041          DCB      0x01,0xc0,0x80,0x41
000098  01c08041          DCB      0x01,0xc0,0x80,0x41
00009c  00c18140          DCB      0x00,0xc1,0x81,0x40
0000a0  00c18140          DCB      0x00,0xc1,0x81,0x40
0000a4  01c08041          DCB      0x01,0xc0,0x80,0x41
0000a8  01c08041          DCB      0x01,0xc0,0x80,0x41
0000ac  00c18140          DCB      0x00,0xc1,0x81,0x40
0000b0  01c08041          DCB      0x01,0xc0,0x80,0x41
0000b4  00c18140          DCB      0x00,0xc1,0x81,0x40
0000b8  00c18140          DCB      0x00,0xc1,0x81,0x40
0000bc  01c08041          DCB      0x01,0xc0,0x80,0x41
0000c0  00c18140          DCB      0x00,0xc1,0x81,0x40
0000c4  01c08041          DCB      0x01,0xc0,0x80,0x41
0000c8  01c08041          DCB      0x01,0xc0,0x80,0x41
0000cc  00c18140          DCB      0x00,0xc1,0x81,0x40
0000d0  01c08041          DCB      0x01,0xc0,0x80,0x41
0000d4  00c18140          DCB      0x00,0xc1,0x81,0x40
0000d8  00c18140          DCB      0x00,0xc1,0x81,0x40
0000dc  01c08041          DCB      0x01,0xc0,0x80,0x41
0000e0  01c08041          DCB      0x01,0xc0,0x80,0x41
0000e4  00c18140          DCB      0x00,0xc1,0x81,0x40
0000e8  00c18140          DCB      0x00,0xc1,0x81,0x40
0000ec  01c08041          DCB      0x01,0xc0,0x80,0x41
0000f0  00c18140          DCB      0x00,0xc1,0x81,0x40
0000f4  01c08041          DCB      0x01,0xc0,0x80,0x41
0000f8  01c08041          DCB      0x01,0xc0,0x80,0x41
0000fc  00c18140          DCB      0x00,0xc1,0x81,0x40
                  s_CRCLo
000100  00c0c101          DCB      0x00,0xc0,0xc1,0x01
000104  c30302c2          DCB      0xc3,0x03,0x02,0xc2
000108  c60607c7          DCB      0xc6,0x06,0x07,0xc7
00010c  05c5c404          DCB      0x05,0xc5,0xc4,0x04
000110  cc0c0dcd          DCB      0xcc,0x0c,0x0d,0xcd
000114  0fcfce0e          DCB      0x0f,0xcf,0xce,0x0e
000118  0acacb0b          DCB      0x0a,0xca,0xcb,0x0b
00011c  c90908c8          DCB      0xc9,0x09,0x08,0xc8
000120  d81819d9          DCB      0xd8,0x18,0x19,0xd9
000124  1bdbda1a          DCB      0x1b,0xdb,0xda,0x1a
000128  1ededf1f          DCB      0x1e,0xde,0xdf,0x1f
00012c  dd1d1cdc          DCB      0xdd,0x1d,0x1c,0xdc
000130  14d4d515          DCB      0x14,0xd4,0xd5,0x15
000134  d71716d6          DCB      0xd7,0x17,0x16,0xd6
000138  d21213d3          DCB      0xd2,0x12,0x13,0xd3
00013c  11d1d010          DCB      0x11,0xd1,0xd0,0x10
000140  f03031f1          DCB      0xf0,0x30,0x31,0xf1
000144  33f3f232          DCB      0x33,0xf3,0xf2,0x32
000148  36f6f737          DCB      0x36,0xf6,0xf7,0x37
00014c  f53534f4          DCB      0xf5,0x35,0x34,0xf4
000150  3cfcfd3d          DCB      0x3c,0xfc,0xfd,0x3d
000154  ff3f3efe          DCB      0xff,0x3f,0x3e,0xfe
000158  fa3a3bfb          DCB      0xfa,0x3a,0x3b,0xfb
00015c  39f9f838          DCB      0x39,0xf9,0xf8,0x38
000160  28e8e929          DCB      0x28,0xe8,0xe9,0x29
000164  eb2b2aea          DCB      0xeb,0x2b,0x2a,0xea
000168  ee2e2fef          DCB      0xee,0x2e,0x2f,0xef
00016c  2dedec2c          DCB      0x2d,0xed,0xec,0x2c
000170  e42425e5          DCB      0xe4,0x24,0x25,0xe5
000174  27e7e626          DCB      0x27,0xe7,0xe6,0x26
000178  22e2e323          DCB      0x22,0xe2,0xe3,0x23
00017c  e12120e0          DCB      0xe1,0x21,0x20,0xe0
000180  a06061a1          DCB      0xa0,0x60,0x61,0xa1
000184  63a3a262          DCB      0x63,0xa3,0xa2,0x62
000188  66a6a767          DCB      0x66,0xa6,0xa7,0x67
00018c  a56564a4          DCB      0xa5,0x65,0x64,0xa4
000190  6cacad6d          DCB      0x6c,0xac,0xad,0x6d
000194  af6f6eae          DCB      0xaf,0x6f,0x6e,0xae
000198  aa6a6bab          DCB      0xaa,0x6a,0x6b,0xab
00019c  69a9a868          DCB      0x69,0xa9,0xa8,0x68
0001a0  78b8b979          DCB      0x78,0xb8,0xb9,0x79
0001a4  bb7b7aba          DCB      0xbb,0x7b,0x7a,0xba
0001a8  be7e7fbf          DCB      0xbe,0x7e,0x7f,0xbf
0001ac  7dbdbc7c          DCB      0x7d,0xbd,0xbc,0x7c
0001b0  b47475b5          DCB      0xb4,0x74,0x75,0xb5
0001b4  77b7b676          DCB      0x77,0xb7,0xb6,0x76
0001b8  72b2b373          DCB      0x72,0xb2,0xb3,0x73
0001bc  b17170b0          DCB      0xb1,0x71,0x70,0xb0
0001c0  50909151          DCB      0x50,0x90,0x91,0x51
0001c4  93535292          DCB      0x93,0x53,0x52,0x92
0001c8  96565797          DCB      0x96,0x56,0x57,0x97
0001cc  55959454          DCB      0x55,0x95,0x94,0x54
0001d0  9c5c5d9d          DCB      0x9c,0x5c,0x5d,0x9d
0001d4  5f9f9e5e          DCB      0x5f,0x9f,0x9e,0x5e
0001d8  5a9a9b5b          DCB      0x5a,0x9a,0x9b,0x5b
0001dc  99595898          DCB      0x99,0x59,0x58,0x98
0001e0  88484989          DCB      0x88,0x48,0x49,0x89
0001e4  4b8b8a4a          DCB      0x4b,0x8b,0x8a,0x4a
0001e8  4e8e8f4f          DCB      0x4e,0x8e,0x8f,0x4f
0001ec  8d4d4c8c          DCB      0x8d,0x4d,0x4c,0x8c
0001f0  44848545          DCB      0x44,0x84,0x85,0x45
0001f4  87474686          DCB      0x87,0x47,0x46,0x86
0001f8  82424383          DCB      0x82,0x42,0x43,0x83
0001fc  41818040          DCB      0x41,0x81,0x80,0x40

                          AREA ||.data||, DATA, ALIGN=2

                  g_mods_timeout
000000  00                DCB      0x00
                  count
000001  00                DCB      0x00
                  i
000002  00                DCB      0x00
                  rmtrig
000003  00                DCB      0x00
000004  00000000          DCB      0x00,0x00,0x00,0x00
                  ||sum||
                          DCD      0x00000000
                  temp
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\User\\stm32f4xx_it.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___14_stm32f4xx_it_c_e289a1ee____REV16|
#line 129 "E:\\Keil_v5\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___14_stm32f4xx_it_c_e289a1ee____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___14_stm32f4xx_it_c_e289a1ee____REVSH|
#line 144
|__asm___14_stm32f4xx_it_c_e289a1ee____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
